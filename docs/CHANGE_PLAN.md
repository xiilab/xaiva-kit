# ë³€ê²½ ê³„íš (Change Plan)

## ğŸš€ ìƒˆë¡œìš´ AI ì„¸ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•

### ğŸ“– 1. ì»¨í…ìŠ¤íŠ¸ í™•ì¸ ì ˆì°¨

**í•„ìˆ˜ ì½ê¸° ë¬¸ì„œ ìˆœì„œ**:
1. **ì´ ë¬¸ì„œ (`CHANGE_PLAN.md`)**: ì „ì²´ ì‘ì—… í˜„í™© ë° ì§„í–‰ ìƒíƒœ
2. **`docs/PROJECT_SUMMARY.md`**: í”„ë¡œì íŠ¸ ì „ì²´ ê°œìš” ë° ì•„í‚¤í…ì²˜  
3. **`docs/DEVELOPMENT_HISTORY.md`**: ê°œë°œ íˆìŠ¤í† ë¦¬ ë° ì£¼ìš” ê²°ì •ì‚¬í•­
4. **`README.md`**: í˜„ì¬ í”„ë¡œì íŠ¸ ìƒíƒœ ë° ì‚¬ìš©ë²•

**ì‘ì—…ë³„ ìƒì„¸ ì»¨í…ìŠ¤íŠ¸**:
- **ë¹Œë“œ ì‹œìŠ¤í…œ**: `docs/build-guide.md`, `docker/Dockerfile`
- **í”„ë¦¬ì…‹ ê´€ë¦¬**: `docs/preset-schema.md`, `presets/` ë””ë ‰í„°ë¦¬  
- **ì˜ì¡´ì„± ê´€ë¦¬**: `scripts/deps_sync.sh`, `artifacts/` êµ¬ì¡°
- **ì½”ë“œ êµ¬ì¡°**: `scripts/build.py`, `scripts/builder/` ëª¨ë“ˆë“¤

### ğŸ“ 2. ì‘ì—… ì™„ë£Œ ì‹œ ì•„ì¹´ì´ë¸Œ ì ˆì°¨

**Step 1: ì‘ì—… ìƒíƒœ ì—…ë°ì´íŠ¸**
```markdown
# í•´ë‹¹ CP ì„¹ì…˜ì—ì„œ
**ìƒíƒœ**: âœ… **ì™„ë£Œ** (YYYY-MM-DD)  
**ì‹¤ì œ ì†Œìš” ì‹œê°„**: Xì‹œê°„  
**ì™„ë£Œì¼**: YYYY-MM-DD
```

**Step 2: ì™„ë£Œ ì‘ì—… ì•„ì¹´ì´ë¸Œ ìƒì„±**
```bash
# docs/completed/ ë””ë ‰í„°ë¦¬ì— ì‘ì—…ë³„ ì™„ë£Œ ë³´ê³ ì„œ ìƒì„±
touch docs/completed/CP-XXX-completion-report.md
```

**ì™„ë£Œ ë³´ê³ ì„œ í…œí”Œë¦¿**:
```markdown
# CP-XXX: [ì‘ì—…ëª…] ì™„ë£Œ ë³´ê³ ì„œ

## âœ… ì™„ë£Œ ìš”ì•½
- **ì‘ì—… ê¸°ê°„**: YYYY-MM-DD ~ YYYY-MM-DD
- **ì‹¤ì œ ì†Œìš” ì‹œê°„**: Xì‹œê°„ (ì˜ˆìƒ: Yì‹œê°„)
- **ì£¼ìš” ë³€ê²½ íŒŒì¼**: [íŒŒì¼ ëª©ë¡]
- **í…ŒìŠ¤íŠ¸ ê²°ê³¼**: [ì„±ê³µ/ì‹¤íŒ¨ ë° ì„¸ë¶€ì‚¬í•­]

## ğŸ“Š ì£¼ìš” ì„±ê³¼
[êµ¬ì²´ì ì¸ ê°œì„  íš¨ê³¼, ìˆ˜ì¹˜ ë“±]

## ğŸ”„ í›„ì† ì‘ì—… ì—°ê²°
- **í™œì„±í™”ëœ í›„ì† ì‘ì—…**: [CP-XXX]
- **ì˜ì¡´ì„± í•´ì œëœ ì‘ì—…**: [CP-XXX]

## ğŸ“š ì°¸ê³  ìë£Œ
- **ê´€ë ¨ ë¬¸ì„œ**: [ì—…ë°ì´íŠ¸ëœ ë¬¸ì„œë“¤]
- **ì½”ë“œ ë³€ê²½**: [ì£¼ìš” íŒŒì¼ ë° ë³€ê²½ì‚¬í•­]
```

**Step 3: CHANGE_PLAN.md ì •ë¦¬**
- ì™„ë£Œëœ CP ì„¹ì…˜ì„ `## ğŸ“ ì™„ë£Œëœ ì‘ì—… ì•„ì¹´ì´ë¸Œ` ì„¹ì…˜ìœ¼ë¡œ ì´ë™
- í™œì„± ì‘ì—… ëª©ë¡ì—ì„œ ì œê±°
- ì˜ì¡´ì„± ìˆëŠ” í›„ì† ì‘ì—… ìƒíƒœ ì—…ë°ì´íŠ¸

### ğŸ”„ 3. ì‘ì—… ì¬ê°œ ì ˆì°¨

**Step 1: í˜„ì¬ í™œì„± ì‘ì—… í™•ì¸**
```bash
# CHANGE_PLAN.mdì—ì„œ í˜„ì¬ ìƒíƒœ í™•ì¸
grep -E "ğŸ”„ ì§„í–‰ ì¤‘|ğŸ“‹ ê³„íš" docs/CHANGE_PLAN.md
```

**Step 2: ì§„í–‰ ì¤‘ì¸ ì‘ì—… íŒŒì•…**
- **ìƒíƒœë³„ ì‘ì—… ë¶„ë¥˜**:
  - `ğŸ”„ ì§„í–‰ ì¤‘`: ì¦‰ì‹œ ì¬ê°œ ê°€ëŠ¥í•œ ì‘ì—…
  - `ğŸ“‹ ê³„íš`: ì‹œì‘ ê°€ëŠ¥í•œ ìƒˆ ì‘ì—…  
  - `â¸ï¸ ë³´ë¥˜`: ì „ì œ ì¡°ê±´ ì¶©ì¡± í›„ ì§„í–‰ ê°€ëŠ¥

**Step 3: ì‘ì—… ì¬ê°œ ì²´í¬ë¦¬ìŠ¤íŠ¸**
```markdown
- [ ] í•´ë‹¹ CP ì„¹ì…˜ì˜ "ì™„ë£Œëœ ì‘ì—…" í™•ì¸
- [ ] "ë‚¨ì€ ì‘ì—…" ì¤‘ ë‹¤ìŒ ë‹¨ê³„ íŒŒì•…  
- [ ] "ìˆ˜ì§‘ í•„ìš”í•œ ì¶”ê°€ ì •ë³´" ê²€í† 
- [ ] ê´€ë ¨ íŒŒì¼ë“¤ì˜ í˜„ì¬ ìƒíƒœ í™•ì¸
- [ ] í…ŒìŠ¤íŠ¸ í™˜ê²½ ë° ì „ì œ ì¡°ê±´ í™•ì¸
```

**Step 4: í•„ìˆ˜ í™•ì¸ ëª…ë ¹ì–´**
```bash
# í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸
python3 scripts/build.py --list-presets
git status
ls -la artifacts/

# ì‘ì—… í™˜ê²½ ê²€ì¦  
docker --version
python3 --version
```

### ğŸ’¡ 4. ì‘ì—… ìš°ì„ ìˆœìœ„ ê°€ì´ë“œ

**ì¦‰ì‹œ ì§„í–‰ ê°€ëŠ¥ (High Priority)**:
- `ğŸ”„ ì§„í–‰ ì¤‘` ìƒíƒœì˜ CPë“¤
- ì˜ì¡´ì„±ì´ ì—†ëŠ” `ğŸ“‹ ê³„íš` ìƒíƒœì˜ CPë“¤

**ì¡°ê±´ë¶€ ì§„í–‰ (Medium Priority)**:
- ê°„ë‹¨í•œ ì „ì œ ì¡°ê±´ì´ ìˆëŠ” `ğŸ“‹ ê³„íš` ìƒíƒœì˜ CPë“¤  
- ê¸°ì¡´ CP ì™„ë£Œ í›„ ì—°ê³„ë˜ëŠ” ì‘ì—…ë“¤

**ë³´ë¥˜/í›„ìˆœìœ„ (Low Priority)**:
- `â¸ï¸ ë³´ë¥˜` ìƒíƒœì˜ CPë“¤ (ì „ì œ ì¡°ê±´ ë¯¸ì¶©ì¡±)
- ë³µì¡í•œ ì˜ì¡´ì„±ì„ ê°€ì§„ ì‘ì—…ë“¤

---

## ğŸ“‹ ë¬¸ì„œ ê°œìš”

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ì˜ ë³€ê²½ ì‚¬í•­ì„ ê´€ë¦¬í•˜ê³  ì¶”ì í•˜ê¸° ìœ„í•œ í†µí•© ë¬¸ì„œì…ë‹ˆë‹¤.
ëª¨ë“  ë³€ê²½, ìˆ˜ì •, ê°œì„  ì‚¬í•­ì€ ì´ ë¬¸ì„œë¥¼ í†µí•´ ê¸°ë¡ë˜ê³  ì°¸ì¡°ë©ë‹ˆë‹¤.

**ìƒì„±ì¼**: 2025-11-21  
**ìƒíƒœ**: ğŸ”„ ì§„í–‰ ì¤‘

---

## ğŸ“Š ë³€ê²½ ì‚¬í•­ ìš”ì•½

### í™•ì •ëœ ë³€ê²½ ì‚¬í•­

| ID | ì œëª© | ìƒíƒœ | ìš°ì„ ìˆœìœ„ | ë‹´ë‹¹ì |
|----|------|------|----------|--------|
| CP-000 | ì½”ë“œë² ì´ìŠ¤ ë¦¬íŒ©í† ë§ | âœ… ì™„ë£Œ | ğŸ”´ğŸ”´ ìµœìš°ì„  | - |
| CP-001 | Dev ì´ë¯¸ì§€ë§Œ ì‚¬ìš© | âœ… ì™„ë£Œ | ë†’ìŒ | - |
| CP-002 | ë¹Œë“œ ì˜ì¡´ì„± ì•„ì¹´ì´ë¸Œ | âœ… ì™„ë£Œ | ë†’ìŒ | - |
| CP-003 | Xaiva Media ë¸Œëœì¹˜ ì„ íƒ | âœ… ì™„ë£Œ | ì¤‘ê°„ | - |
| CP-004 | ëŒ€í™”í˜• ì˜ì¡´ì„± ê´€ë¦¬ | â¸ï¸ ë³´ë¥˜ | ë‚®ìŒ | - |
| CP-005 | ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ | â¸ï¸ ë³´ë¥˜ | ë‚®ìŒ | - |
| CP-006 | deps_sync.sh ì»¨í…Œì´ë„ˆí™” | ğŸ“‹ ê³„íš | ì¤‘ê°„ | - |
| CP-007 | í”„ë¦¬ì…‹ ë‹¨ìˆœí™” | âœ… ì™„ë£Œ | ë†’ìŒ | - |

### ìƒíƒœ ì½”ë“œ
- ğŸ“‹ ê³„íš: ê³„íš ë‹¨ê³„
- ğŸ”„ ì§„í–‰ ì¤‘: êµ¬í˜„ ì¤‘
- âœ… ì™„ë£Œ: êµ¬í˜„ ì™„ë£Œ
- â¸ï¸ ë³´ë¥˜: ì¼ì‹œ ì¤‘ë‹¨
- âŒ ì·¨ì†Œ: ì·¨ì†Œë¨

---

## CP-000: ì½”ë“œë² ì´ìŠ¤ ë¦¬íŒ©í† ë§ âœ… ì™„ë£Œ

### ğŸ“Œ ê°œìš”

**ëª©ì **: ì¶”ê°€ ë³€ê²½ ì‘ì—…(CP-001~CP-004) ì§„í–‰ ì „ í˜„ì¬ ì½”ë“œë² ì´ìŠ¤ë¥¼ ì •ë¦¬í•˜ê³  ë¦¬íŒ©í† ë§

**ë°°ê²½**:
- í˜„ì¬: ê¸‰ì† ê°œë°œë¡œ ì¸í•œ ì½”ë“œ ì¤‘ë³µ, ë³µì¡ë„ ì¦ê°€
- í•„ìš”: ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ, í–¥í›„ ë³€ê²½ ìš©ì´ì„± í™•ë³´
- ì‹œì : ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„ ì „ ë¦¬íŒ©í† ë§ì´ íš¨ìœ¨ì 

**ìš°ì„ ìˆœìœ„**: ğŸ”´ğŸ”´ ìµœìš°ì„  (ëª¨ë“  ë³€ê²½ ì‘ì—… ì „ ì„ í–‰)  
**ì‹¤ì œ ì‘ì—… ì‹œê°„**: ì•½ 1ì‹œê°„ (ì˜ˆìƒ 6-8ì‹œê°„ ëŒ€ë¹„ ë§¤ìš° íš¨ìœ¨ì )  
**ì™„ë£Œì¼**: 2025-11-21

---

### ğŸ“‹ í˜„ì¬ ì½”ë“œë² ì´ìŠ¤ ìƒíƒœ ë¶„ì„

#### ì£¼ìš” íŒŒì¼ í¬ê¸° ë° ë³µì¡ë„

| íŒŒì¼ | ë¼ì¸ ìˆ˜ | ë³µì¡ë„ | ë¦¬íŒ©í† ë§ í•„ìš”ë„ |
|------|---------|--------|-----------------|
| `docker/Dockerfile` | 513 | ë†’ìŒ | ğŸ”´ ë†’ìŒ |
| `scripts/build.py` | ~650 | ë†’ìŒ | ğŸ”´ ë†’ìŒ |
| `scripts/deps_sync.sh` | ~270 | ì¤‘ê°„ | ğŸŸ¡ ì¤‘ê°„ |
| `presets/*.json` | ~110 | ë‚®ìŒ | ğŸŸ¢ ë‚®ìŒ |

#### ì‹ë³„ëœ ë¬¸ì œì 

**1. Dockerfile (513 lines)**
- âŒ ê¸´ RUN ëª…ë ¹ì–´ ë¸”ë¡ (ê°€ë…ì„± ì €í•˜)
- âŒ ì£¼ì„ ì²˜ë¦¬ëœ ì½”ë“œ ë‹¤ìˆ˜ (FFmpeg, OpenCV ë¹Œë“œ)
- âŒ ì¤‘ë³µëœ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë¡œì§
- âŒ Runtime/Dev ìŠ¤í…Œì´ì§€ ë¶„ë¦¬ë¡œ ì¸í•œ ë³µì¡ë„

**2. build.py (~650 lines)**
- âŒ ë‹¨ì¼ íŒŒì¼ì— ëª¨ë“  ê¸°ëŠ¥ ì§‘ì¤‘
- âŒ í•¨ìˆ˜ê°€ ê¸¸ê³  ë³µì¡í•¨ (ì¼ë¶€ 100+ ë¼ì¸)
- âŒ ê²€ì¦ ë¡œì§ ë¶„ì‚°
- âŒ ì—ëŸ¬ ì²˜ë¦¬ ì¼ê´€ì„± ë¶€ì¡±

**3. deps_sync.sh (~270 lines)**
- âŒ í˜„ì¬ ì•ˆë‚´ ë©”ì‹œì§€ë§Œ ì¶œë ¥ (ì‹¤ì œ ê¸°ëŠ¥ ë¯¸êµ¬í˜„)
- âŒ í–¥í›„ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ êµ¬ì¡° í•„ìš”

**4. í”„ë¡œì íŠ¸ êµ¬ì¡°**
- âŒ xaiva-media/ ë””ë ‰í„°ë¦¬ê°€ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— í˜¼ì¬
- âŒ artifacts ê´€ë¦¬ ë°©ì‹ ë¶ˆëª…í™•

---

### ğŸ¯ ë¦¬íŒ©í† ë§ ë²”ìœ„ ì œí•œ

#### Phase 0.1: í•µì‹¬ íŒŒì¼ë§Œ ë¦¬íŒ©í† ë§ (í•„ìˆ˜)

**ëŒ€ìƒ íŒŒì¼ (3ê°œ)**:
1. âœ… `docker/Dockerfile` - ê°€ì¥ ì¤‘ìš”, ê°€ì¥ ë³µì¡
2. âœ… `scripts/build.py` - í•µì‹¬ ë¹Œë“œ ë¡œì§
3. â­ï¸ `scripts/deps_sync.sh` - ë‚˜ì¤‘ì— (CP-002ì™€ í•¨ê»˜)

**ì œì™¸ ëŒ€ìƒ**:
- âŒ `presets/*.json` - êµ¬ì¡° ë‹¨ìˆœ, ë¦¬íŒ©í† ë§ ë¶ˆí•„ìš”
- âŒ `docs/*` - ë¬¸ì„œëŠ” ë³„ë„ ê´€ë¦¬
- âŒ `xaiva-media/*` - ì™¸ë¶€ í”„ë¡œì íŠ¸

#### Phase 0.2: í”„ë¡œì íŠ¸ êµ¬ì¡° ì •ë¦¬ (ì„ íƒ)

**ëŒ€ìƒ**:
- xaiva-media/ ìœ„ì¹˜ ë° ê´€ë¦¬ ë°©ì‹ ê²°ì •
- artifacts/ êµ¬ì¡° ê²€ì¦

---

### ğŸ“ ë¦¬íŒ©í† ë§ ìƒì„¸ ê³„íš

---

#### ë¦¬íŒ©í† ë§ 1: Dockerfile ê°œì„ 

**í˜„ì¬ ë¬¸ì œì **:
```dockerfile
# ë¬¸ì œ 1: ì£¼ì„ ì²˜ë¦¬ëœ ê¸´ ì½”ë“œ ë¸”ë¡ (100+ ë¼ì¸)
# RUN echo "=== Building FFmpeg ===" && \
#     cd /tmp/third_party && \
#     ...
#     (100+ ë¼ì¸)

# ë¬¸ì œ 2: ê¸´ RUN ëª…ë ¹ì–´
RUN echo "=== Installing Python packages ===" && \
    pip3 install --upgrade pip setuptools wheel && \
    pip3 install numpy==1.23.1 && \
    ... (30+ ë¼ì¸)

# ë¬¸ì œ 3: Runtime/Dev ìŠ¤í…Œì´ì§€ ì¤‘ë³µ
```

**ë¦¬íŒ©í† ë§ ëª©í‘œ**:
- [ ] ì£¼ì„ ì²˜ë¦¬ëœ ì½”ë“œ ì œê±° ë˜ëŠ” ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬
- [ ] ê¸´ RUN ëª…ë ¹ì–´ë¥¼ ë…¼ë¦¬ì  ë‹¨ìœ„ë¡œ ë¶„í• 
- [ ] ì¤‘ë³µ ì œê±°
- [ ] ë¼ì¸ ìˆ˜ ëª©í‘œ: 513 â†’ ~300-350 ë¼ì¸

**í•„ìš”í•œ ì •ë³´**:

**Q1. Dockerfile ì£¼ì„ ì½”ë“œ ì²˜ë¦¬**
- [ ] ì£¼ì„ ì²˜ë¦¬ëœ FFmpeg ë¹Œë“œ ì½”ë“œ (100+ ë¼ì¸)
  - ì˜µì…˜ A: ì™„ì „ ì‚­ì œ (Git íˆìŠ¤í† ë¦¬ì— ë‚¨ìŒ)
  - ì˜µì…˜ B: `docker/build-scripts/` ë””ë ‰í„°ë¦¬ë¡œ ë¶„ë¦¬
  - ì˜µì…˜ C: ìœ ì§€ (í˜„ì¬ ìƒíƒœ)
  - **ê²°ì • í•„ìš”**: ?

- [ ] ì£¼ì„ ì²˜ë¦¬ëœ OpenCV ë¹Œë“œ ì½”ë“œ (80+ ë¼ì¸)
  - ì˜µì…˜ A: ì™„ì „ ì‚­ì œ
  - ì˜µì…˜ B: ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬
  - ì˜µì…˜ C: ìœ ì§€
  - **ê²°ì • í•„ìš”**: ?

- [ ] ì£¼ì„ ì²˜ë¦¬ëœ Xaiva Media ë¹Œë“œ ì½”ë“œ (50+ ë¼ì¸)
  - ì˜µì…˜ A: ì™„ì „ ì‚­ì œ
  - ì˜µì…˜ B: ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬
  - ì˜µì…˜ C: ìœ ì§€
  - **ê²°ì • í•„ìš”**: ?

**Q2. Dockerfile êµ¬ì¡° ê°œì„ **
- [ ] RUN ëª…ë ¹ì–´ ë¶„í•  ê¸°ì¤€
  - ì˜µì…˜ A: ë…¼ë¦¬ì  ë‹¨ìœ„ë³„ (íŒ¨í‚¤ì§€ ì„¤ì¹˜, ë¹Œë“œ, ì •ë¦¬)
  - ì˜µì…˜ B: ë ˆì´ì–´ ìµœì í™” ìš°ì„  (ìµœì†Œ RUN ìˆ˜)
  - ì˜µì…˜ C: ê°€ë…ì„± ìš°ì„  (ì„¸ë¶„í™”)
  - **ê²°ì • í•„ìš”**: ?

- [ ] ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì™¸ë¶€í™”
  - ì˜µì…˜ A: ë³µì¡í•œ ë¹Œë“œ ë¡œì§ì„ `docker/scripts/*.sh`ë¡œ ë¶„ë¦¬
  - ì˜µì…˜ B: Dockerfile ë‚´ë¶€ì— ìœ ì§€
  - **ê²°ì • í•„ìš”**: ?

**Q3. Runtime/Dev ìŠ¤í…Œì´ì§€**
- [ ] CP-001(Dev ì´ë¯¸ì§€ë§Œ ì‚¬ìš©)ê³¼ ì—°ê³„
  - ì˜µì…˜ A: ë¦¬íŒ©í† ë§ í›„ CP-001 ì§„í–‰
  - ì˜µì…˜ B: CP-001 ë¨¼ì € ì§„í–‰ í›„ ë¦¬íŒ©í† ë§
  - **ê²°ì • í•„ìš”**: ë¦¬íŒ©í† ë§ ë¨¼ì € ê¶Œì¥ (ì¤‘ë³µ ì œê±° í›„ í†µí•©ì´ ì‰¬ì›€)

**Q4. íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë¡œì§**
- [ ] Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë°©ì‹
  - í˜„ì¬: Dockerfileì— í•˜ë“œì½”ë”© (numpy==1.23.1 ë“±)
  - ì˜µì…˜ A: í”„ë¦¬ì…‹ JSONì—ì„œ ë²„ì „ ì½ì–´ì˜¤ê¸° (ë³µì¡)
  - ì˜µì…˜ B: í•˜ë“œì½”ë”© ìœ ì§€í•˜ë˜ ì£¼ì„ìœ¼ë¡œ ì¶œì²˜ ëª…ì‹œ
  - **ê²°ì • í•„ìš”**: ?

---

#### ë¦¬íŒ©í† ë§ 2: build.py ëª¨ë“ˆí™”

**í˜„ì¬ ë¬¸ì œì **:
```python
# ë¬¸ì œ 1: ë‹¨ì¼ íŒŒì¼ 650+ ë¼ì¸
# - í”„ë¦¬ì…‹ ë¡œë”©
# - ê²€ì¦
# - ëŒ€í™”í˜• UI
# - Docker ë¹Œë“œ
# - ì—ëŸ¬ ì²˜ë¦¬
# ëª¨ë‘ í•œ íŒŒì¼ì—

# ë¬¸ì œ 2: ê¸´ í•¨ìˆ˜
def build_docker_image(...):  # 100+ ë¼ì¸
    ...

def validate_preset(...):     # 80+ ë¼ì¸
    ...
```

**ë¦¬íŒ©í† ë§ ëª©í‘œ**:
- [ ] íŒŒì¼ ë¶„í•  (ëª¨ë“ˆí™”)
- [ ] í•¨ìˆ˜ í¬ê¸° ì œí•œ (50 ë¼ì¸ ì´í•˜ ê¶Œì¥)
- [ ] í´ë˜ìŠ¤ ë„ì… ê²€í† 
- [ ] ë¼ì¸ ìˆ˜ ëª©í‘œ: 650 â†’ ê° ëª¨ë“ˆ 200 ë¼ì¸ ì´í•˜

**í•„ìš”í•œ ì •ë³´**:

**Q5. build.py ëª¨ë“ˆ ë¶„í•  ë°©ì‹**
- [ ] ëª¨ë“ˆ êµ¬ì¡°
  - ì˜µì…˜ A: ê¸°ëŠ¥ë³„ ë¶„í• 
    ```
    scripts/
    â”œâ”€â”€ build.py           # ë©”ì¸ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸ (100 ë¼ì¸)
    â”œâ”€â”€ builder/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ preset.py      # í”„ë¦¬ì…‹ ë¡œë”©/ê²€ì¦
    â”‚   â”œâ”€â”€ validator.py   # ê²€ì¦ ë¡œì§
    â”‚   â”œâ”€â”€ docker.py      # Docker ë¹Œë“œ
    â”‚   â””â”€â”€ ui.py          # ëŒ€í™”í˜• UI
    â””â”€â”€ deps_sync.sh
    ```
  - ì˜µì…˜ B: ë‹¨ì¼ íŒŒì¼ ìœ ì§€, í•¨ìˆ˜ ë¶„ë¦¬ë§Œ
  - ì˜µì…˜ C: í´ë˜ìŠ¤ ê¸°ë°˜ ì¬ì„¤ê³„
    ```python
    class PresetManager:
        def load()
        def validate()
    
    class DockerBuilder:
        def build()
    
    class InteractiveUI:
        def prompt()
    ```
  - **ê²°ì • í•„ìš”**: ?

**Q6. ì˜ì¡´ì„± ê´€ë¦¬**
- [ ] í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œí•œ ìœ ì§€ ì—¬ë¶€
  - í˜„ì¬: Python í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì‚¬ìš©
  - ì˜µì…˜ A: ê³„ì† ìœ ì§€ (ì„¤ì¹˜ ë¶ˆí•„ìš”)
  - ì˜µì…˜ B: ìœ ìš©í•œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ í—ˆìš© (click, pydantic ë“±)
  - **ê²°ì • í•„ìš”**: ?

**Q7. ì—ëŸ¬ ì²˜ë¦¬**
- [ ] ì—ëŸ¬ ì²˜ë¦¬ ì¼ê´€ì„±
  - í˜„ì¬: sys.exit(1), print_error() í˜¼ì¬
  - ì˜µì…˜ A: ì»¤ìŠ¤í…€ Exception í´ë˜ìŠ¤ ë„ì…
  - ì˜µì…˜ B: í˜„ì¬ ë°©ì‹ ìœ ì§€í•˜ë˜ ì¼ê´€ì„± í™•ë³´
  - **ê²°ì • í•„ìš”**: ?

**Q8. í…ŒìŠ¤íŠ¸**
- [ ] ìœ ë‹› í…ŒìŠ¤íŠ¸ ì¶”ê°€ ì—¬ë¶€
  - ì˜µì…˜ A: pytest ë„ì…í•˜ì—¬ ì£¼ìš” í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
  - ì˜µì…˜ B: í…ŒìŠ¤íŠ¸ ì—†ì´ ìˆ˜ë™ ê²€ì¦
  - **ê²°ì • í•„ìš”**: ?

---

#### ë¦¬íŒ©í† ë§ 3: í”„ë¡œì íŠ¸ êµ¬ì¡° ì •ë¦¬ (ì„ íƒ)

**í˜„ì¬ ë¬¸ì œì **:
```
xaiva-kit/
â”œâ”€â”€ xaiva-media/           # âŒ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìœ„ì¹˜
â”‚   â””â”€â”€ (Xaiva Media ì†ŒìŠ¤)
â”œâ”€â”€ artifacts/
â”œâ”€â”€ docker/
â””â”€â”€ scripts/
```

**ë¦¬íŒ©í† ë§ ëª©í‘œ**:
- [ ] xaiva-media ìœ„ì¹˜ ë° ê´€ë¦¬ ë°©ì‹ ê²°ì •
- [ ] .gitignore ì¬ê²€í† 

**í•„ìš”í•œ ì •ë³´**:

**Q9. xaiva-media ì†ŒìŠ¤ ê´€ë¦¬**
- [ ] xaiva-media ë””ë ‰í„°ë¦¬ ìœ„ì¹˜
  - í˜„ì¬: í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ì§ì ‘ ì¡´ì¬
  - ì˜µì…˜ A: Git ì„œë¸Œëª¨ë“ˆë¡œ ì „í™˜ (ê¶Œì¥ - CP-003 ì—°ê³„)
  - ì˜µì…˜ B: í”„ë¡œì íŠ¸ ì™¸ë¶€ ê²½ë¡œ ì‚¬ìš©, ë¹Œë“œ ì‹œ ë§ˆìš´íŠ¸
  - ì˜µì…˜ C: í˜„ì¬ ìƒíƒœ ìœ ì§€
  - **ê²°ì • í•„ìš”**: ?

**Q10. .gitignore**
- [ ] xaiva-media/ í¬í•¨ ì—¬ë¶€
  - ì˜µì…˜ A: .gitignoreì— ì¶”ê°€ (ì„œë¸Œëª¨ë“ˆì´ë©´ ìë™ ì œì™¸)
  - ì˜µì…˜ B: Gitì— í¬í•¨ (í˜„ì¬)
  - **ê²°ì • í•„ìš”**: ?

---

### ğŸ“Š ë³€ê²½ ëŒ€ìƒ ì œí•œ ë§¤íŠ¸ë¦­ìŠ¤

| íŒŒì¼/ë””ë ‰í„°ë¦¬ | ë¦¬íŒ©í† ë§ | ìš°ì„ ìˆœìœ„ | ì˜ˆìƒ ì‹œê°„ | ì˜ì¡´ì„± |
|---------------|----------|----------|-----------|--------|
| **docker/Dockerfile** | âœ… í•„ìˆ˜ | P0 | 3-4ì‹œê°„ | Q1-Q4 |
| **scripts/build.py** | âœ… í•„ìˆ˜ | P0 | 2-3ì‹œê°„ | Q5-Q8 |
| scripts/deps_sync.sh | â­ï¸ ë‚˜ì¤‘ | P2 | - | CP-002 |
| xaiva-media/ ìœ„ì¹˜ | ğŸ”¶ ì„ íƒ | P1 | 1ì‹œê°„ | Q9-Q10 |
| presets/*.json | âŒ ì œì™¸ | - | - | - |
| docs/* | âŒ ì œì™¸ | - | - | - |

**ìš°ì„ ìˆœìœ„ ë²”ë¡€**:
- **P0**: ìµœìš°ì„  (í•„ìˆ˜)
- **P1**: ë†’ìŒ (ê°•ë ¥ ê¶Œì¥)
- **P2**: ë‚˜ì¤‘ (ë‹¤ë¥¸ ì‘ì—…ê³¼ í•¨ê»˜)

---

### ğŸ” í•„ìš”í•œ ì •ë³´ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ì¦‰ì‹œ ê²°ì • í•„ìš” (ë¦¬íŒ©í† ë§ ì‹œì‘ ì „)

**Dockerfile ê´€ë ¨** (Q1-Q4):
- [ ] **Q1**: ì£¼ì„ ì²˜ë¦¬ëœ ë¹Œë“œ ì½”ë“œ ì²˜ë¦¬ ë°©ì‹
  - FFmpeg ë¹Œë“œ ì½”ë“œ (100+ ë¼ì¸)
  - OpenCV ë¹Œë“œ ì½”ë“œ (80+ ë¼ì¸)
  - Xaiva Media ë¹Œë“œ ì½”ë“œ (50+ ë¼ì¸)
  - **ê¶Œì¥**: ì˜µì…˜ B (ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬) - í–¥í›„ ì¬ì‚¬ìš© ê°€ëŠ¥

- [ ] **Q2**: Dockerfile êµ¬ì¡° ê°œì„  ê¸°ì¤€
  - **ê¶Œì¥**: ì˜µì…˜ C (ê°€ë…ì„± ìš°ì„ , ì„¸ë¶„í™”)

- [ ] **Q3**: Runtime/Dev ìŠ¤í…Œì´ì§€ ì²˜ë¦¬ ìˆœì„œ
  - **ê¶Œì¥**: ë¦¬íŒ©í† ë§ ë¨¼ì €, CP-001ì€ ê·¸ ë‹¤ìŒ

- [ ] **Q4**: Python íŒ¨í‚¤ì§€ ë²„ì „ ê´€ë¦¬
  - **ê¶Œì¥**: ì˜µì…˜ B (í•˜ë“œì½”ë”© ìœ ì§€, ì£¼ì„ìœ¼ë¡œ ì¶œì²˜ ëª…ì‹œ)

**build.py ê´€ë ¨** (Q5-Q8):
- [ ] **Q5**: ëª¨ë“ˆ ë¶„í•  ë°©ì‹
  - **ê¶Œì¥**: ì˜µì…˜ A (ê¸°ëŠ¥ë³„ ë¶„í• , ë””ë ‰í„°ë¦¬ êµ¬ì¡°)
  - ë‹¨ìˆœí•˜ë©´ì„œë„ í™•ì¥ ê°€ëŠ¥

- [ ] **Q6**: í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì œí•œ ìœ ì§€
  - **ê¶Œì¥**: ì˜µì…˜ A (í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ) - ì„¤ì¹˜ ë¶ˆí•„ìš”

- [ ] **Q7**: ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹
  - **ê¶Œì¥**: ì˜µì…˜ B (í˜„ì¬ ë°©ì‹ ìœ ì§€, ì¼ê´€ì„± í™•ë³´)

- [ ] **Q8**: í…ŒìŠ¤íŠ¸ ì¶”ê°€ ì—¬ë¶€
  - **ê¶Œì¥**: ì˜µì…˜ B (ìˆ˜ë™ ê²€ì¦) - ë¹ ë¥¸ ì§„í–‰ ìš°ì„ 

#### ë‚˜ì¤‘ì— ê²°ì • ê°€ëŠ¥ (ì„ íƒì  ë¦¬íŒ©í† ë§)

**í”„ë¡œì íŠ¸ êµ¬ì¡° ê´€ë ¨** (Q9-Q10):
- [ ] **Q9**: xaiva-media ì†ŒìŠ¤ ê´€ë¦¬
  - **ê¶Œì¥**: ì˜µì…˜ A (Git ì„œë¸Œëª¨ë“ˆ) - CP-003ê³¼ ì—°ê³„

- [ ] **Q10**: .gitignore ì„¤ì •
  - **ê¶Œì¥**: ì˜µì…˜ A (ì„œë¸Œëª¨ë“ˆì´ë©´ ìë™ ì œì™¸)

---

### ğŸ“… ë¦¬íŒ©í† ë§ ì‘ì—… ìˆœì„œ

#### Step 1: ì •ë³´ ìˆ˜ì§‘ ë° ê²°ì • (1ì‹œê°„)
1. Q1-Q8 ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ ìˆ˜ì§‘
2. ë¦¬íŒ©í† ë§ ë°©í–¥ ìµœì¢… í™•ì •
3. Git ë¸Œëœì¹˜ ìƒì„±: `refactor/cp-000-codebase`

#### Step 2: Dockerfile ë¦¬íŒ©í† ë§ (3-4ì‹œê°„)
1. ì£¼ì„ ì½”ë“œ ì²˜ë¦¬ (Q1 ë‹µë³€ ë°˜ì˜)
2. RUN ëª…ë ¹ì–´ ë¶„í•  (Q2 ë‹µë³€ ë°˜ì˜)
3. êµ¬ì¡° ê°œì„  (Q3, Q4 ë‹µë³€ ë°˜ì˜)
4. ë¡œì»¬ ë¹Œë“œ í…ŒìŠ¤íŠ¸

#### Step 3: build.py ë¦¬íŒ©í† ë§ (2-3ì‹œê°„)
1. ëª¨ë“ˆ ë¶„í•  (Q5 ë‹µë³€ ë°˜ì˜)
2. í•¨ìˆ˜ ë¶„ë¦¬ ë° ë‹¨ìˆœí™”
3. ì—ëŸ¬ ì²˜ë¦¬ ì¼ê´€ì„± (Q7 ë‹µë³€ ë°˜ì˜)
4. ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

#### Step 4: í”„ë¡œì íŠ¸ êµ¬ì¡° ì •ë¦¬ (1ì‹œê°„, ì„ íƒ)
1. xaiva-media ìœ„ì¹˜ ë³€ê²½ (Q9 ë‹µë³€ ë°˜ì˜)
2. .gitignore ì—…ë°ì´íŠ¸ (Q10 ë‹µë³€ ë°˜ì˜)

#### Step 5: ë¬¸ì„œ ì—…ë°ì´íŠ¸ ë° ê²€ì¦ (30ë¶„)
1. CHANGE_PLAN.md ì—…ë°ì´íŠ¸
2. ë¹Œë“œ ê°€ì´ë“œ ìˆ˜ì • (í•„ìš”ì‹œ)
3. ìµœì¢… í…ŒìŠ¤íŠ¸

---

### âœ… ì™„ë£Œ ì¡°ê±´

#### í•„ìˆ˜ ì¡°ê±´
- [x] Dockerfile ë¼ì¸ ìˆ˜ 30% ì´ìƒ ê°ì†Œ (513 â†’ ~350)
- [x] build.py ëª¨ë“ˆ ë¶„í•  ì™„ë£Œ
- [x] ì „ì²´ ë¹Œë“œ í…ŒìŠ¤íŠ¸ ì„±ê³µ (ê¸°ëŠ¥ ìœ ì§€)
- [x] ëª¨ë“  ê²°ì • ì‚¬í•­ ë¬¸ì„œí™”

#### ì„ íƒ ì¡°ê±´
- [ ] xaiva-media ì„œë¸Œëª¨ë“ˆ ì „í™˜ (Q9ì— ë”°ë¼)
- [ ] í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€ (Q8ì— ë”°ë¼)

---

### ğŸ¯ ë¦¬íŒ©í† ë§ ì„±ê³µ ì§€í‘œ

**ì •ëŸ‰ì  ì§€í‘œ**:
- Dockerfile: 513 ë¼ì¸ â†’ 300-350 ë¼ì¸ (30% ê°ì†Œ)
- build.py: 650 ë¼ì¸ â†’ ê° ëª¨ë“ˆ 200 ë¼ì¸ ì´í•˜
- ë¹Œë“œ ì‹œê°„: ë³€í™” ì—†ìŒ (ê¸°ëŠ¥ ìœ ì§€)

**ì •ì„±ì  ì§€í‘œ**:
- ì½”ë“œ ê°€ë…ì„± í–¥ìƒ
- í–¥í›„ ë³€ê²½ ìš©ì´ì„± ì¦ê°€
- ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´ ê°ì†Œ

---

### ğŸ“Š ë¦¬íŒ©í† ë§ ê²°ê³¼

#### ìµœì¢… ë‹¬ì„± ìˆ˜ì¹˜
- **Dockerfile**: 513ì¤„ â†’ ì•½ 250ì¤„ (51% ê°ì†Œ) âœ…
  - ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ë¶„ë¦¬ë¡œ ëŒ€í­ ê°„ì†Œí™”
  - ê°€ë…ì„± ìš°ì„  êµ¬ì¡°ë¡œ ê°œì„ 
- **build.py**: 594ì¤„ â†’ 250ì¤„ (58% ê°ì†Œ) âœ…
  - ëª¨ë“ˆí™”: builder/ ë””ë ‰í„°ë¦¬ì— 5ê°œ íŒŒì¼ë¡œ ë¶„ë¦¬
  - ê° ëª¨ë“ˆ: utils.py (30ì¤„), preset.py (120ì¤„), docker.py (140ì¤„), ui.py (110ì¤„)
- **ìƒˆë¡œìš´ êµ¬ì¡°**:
  - docker/build-scripts/: 4ê°œì˜ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€
  - scripts/builder/: 5ê°œì˜ Python ëª¨ë“ˆ ì¶”ê°€

#### êµ¬í˜„ëœ ê°œì„ ì‚¬í•­
1. **Q1**: Docker ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ë¶„ë¦¬ (ì˜µì…˜ A ì±„íƒ)
2. **Q2**: Dockerfile êµ¬ì¡° ê°œì„  - ê°€ë…ì„± ìš°ì„  (ì˜µì…˜ C ì±„íƒ)
3. **Q3**: Runtime/Dev ì²˜ë¦¬ - ë¦¬íŒ©í† ë§ ë¨¼ì € ì™„ë£Œ (ì˜µì…˜ A ì±„íƒ)
4. **Q4**: Python íŒ¨í‚¤ì§€ ë²„ì „ ê´€ë¦¬ - PyTorch/TensorRT ë³„ë„ ì„¤ì¹˜
5. **Q5**: build.py ëª¨ë“ˆí™” - ê¸°ëŠ¥ë³„ ë””ë ‰í„°ë¦¬ êµ¬ì¡° (ì˜µì…˜ A ì±„íƒ)
6. **Q6**: í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ìœ ì§€ (ì˜µì…˜ A ì±„íƒ)
7. **Q7**: ì—ëŸ¬ ì²˜ë¦¬ - í˜„ì¬ ë°©ì‹ ìœ ì§€ + ì¼ê´€ì„± (ì˜µì…˜ B ì±„íƒ)
8. **Q8**: í…ŒìŠ¤íŠ¸ - ìˆ˜ë™ ê²€ì¦ (ì˜µì…˜ B ì±„íƒ)
9. **Q10**: .gitignoreì— xaiva-media ì¶”ê°€

#### ì£¼ìš” ì„±ê³¼
- âœ… ëª©í‘œ ëŒ€ë¹„ ì´ˆê³¼ ë‹¬ì„± (30% ê°ì†Œ ëª©í‘œ â†’ 50%+ ë‹¬ì„±)
- âœ… ì‘ì—… ì‹œê°„ ëŒ€í­ ë‹¨ì¶• (ì˜ˆìƒ 6-8ì‹œê°„ â†’ ì‹¤ì œ ì•½ 1ì‹œê°„)
- âœ… ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸
- âœ… í–¥í›„ ë³€ê²½ ì‘ì—…ì„ ìœ„í•œ ê¸°ë°˜ ë§ˆë ¨

---

### âš ï¸ ë¦¬ìŠ¤í¬ ë° ì™„í™” ë°©ì•ˆ

**ë¦¬ìŠ¤í¬ 1: ë¹Œë“œ ì‹¤íŒ¨**
- ì™„í™”: ê° ë‹¨ê³„ë§ˆë‹¤ ë¹Œë“œ í…ŒìŠ¤íŠ¸
- ë¡¤ë°±: Git ì»¤ë°‹ ë‹¨ê³„ë³„ ë¶„ë¦¬

**ë¦¬ìŠ¤í¬ 2: ê¸°ëŠ¥ ë³€ê²½/ì†ì‹¤**
- ì™„í™”: ë¦¬íŒ©í† ë§ë§Œ, ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ
- ê²€ì¦: ë¹Œë“œ í›„ ì´ë¯¸ì§€ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

**ë¦¬ìŠ¤í¬ 3: ì‹œê°„ ì´ˆê³¼**
- ì™„í™”: P0(í•„ìˆ˜)ë§Œ ì§„í–‰, P1(ì„ íƒ)ì€ ë‚˜ì¤‘ì—

---

### ğŸ“ ì‘ì—… ë…¸íŠ¸

**ë¦¬íŒ©í† ë§ ì›ì¹™**:
1. ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ (ë¦¬íŒ©í† ë§ë§Œ)
2. ë‹¨ê³„ë³„ ì»¤ë°‹ (ë¡¤ë°± ê°€ëŠ¥)
3. í…ŒìŠ¤íŠ¸ í›„ ì§„í–‰
4. ë¬¸ì„œ ë™ì‹œ ì—…ë°ì´íŠ¸

**ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹**:
```
refactor(dockerfile): ì£¼ì„ ì½”ë“œ ì œê±° ë° RUN ëª…ë ¹ì–´ ë¶„í• 

- ì£¼ì„ ì²˜ë¦¬ëœ FFmpeg ë¹Œë“œ ì½”ë“œë¥¼ docker/build-scripts/ë¡œ ë¶„ë¦¬
- RUN ëª…ë ¹ì–´ë¥¼ ë…¼ë¦¬ì  ë‹¨ìœ„ë¡œ ë¶„í•  (íŒ¨í‚¤ì§€ ì„¤ì¹˜, ë¹Œë“œ, ì •ë¦¬)
- ë¼ì¸ ìˆ˜: 513 â†’ 350

Refs: CP-000
```

---

## CP-001: Dev ì´ë¯¸ì§€ë§Œ ì‚¬ìš©

### ğŸ“Œ ê°œìš”

**ëª©ì **: Runtime/Dev ì´ë¯¸ì§€ ë¶„ë¦¬ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”í•˜ì—¬ Dev ì´ë¯¸ì§€ë§Œ ì‚¬ìš©

**ë°°ê²½**:
- í˜„ì¬: Multi-stage Dockerfile (base â†’ builder â†’ runtime/dev)
- ë³€ê²½: Multi-stage Dockerfile (base â†’ builder â†’ dev)
- Runtime ì´ë¯¸ì§€ ì œê±°, Dev ì´ë¯¸ì§€ë¡œ í†µí•©

**ìš°ì„ ìˆœìœ„**: ë†’ìŒ  
**ì˜ˆìƒ ì‘ì—… ì‹œê°„**: 2-3ì‹œê°„  
**ì‹¤ì œ ì‘ì—… ì‹œê°„**: ì•½ 1ì‹œê°„  
**ì™„ë£Œì¼**: 2025-11-21

### ğŸ“‹ í˜„ì¬ ìƒíƒœ

#### í˜„ì¬ Dockerfile êµ¬ì¡°
```dockerfile
FROM ... AS base          # ê³µí†µ ë² ì´ìŠ¤
FROM base AS builder      # ë¹Œë“œ ìŠ¤í…Œì´ì§€
FROM base AS runtime      # ëŸ°íƒ€ì„ ì´ë¯¸ì§€ (ìµœì†Œí™”)
FROM builder AS dev       # ê°œë°œ ì´ë¯¸ì§€ (ë¹Œë“œ ë„êµ¬ í¬í•¨)
```

#### í˜„ì¬ build.py
```python
BUILD_TYPES = ["runtime", "dev"]
DEFAULT_BUILD_TYPE = "runtime"

# ë¹Œë“œ íƒ€ì… ì„ íƒ UI
# docker build --target runtime/dev
```

### ğŸ¯ ë³€ê²½ ëª©í‘œ

#### ëª©í‘œ Dockerfile êµ¬ì¡°
```dockerfile
FROM ... AS base          # ê³µí†µ ë² ì´ìŠ¤
FROM base AS builder      # ë¹Œë“œ ìŠ¤í…Œì´ì§€
FROM builder AS dev       # ê°œë°œ/ë°°í¬ í†µí•© ì´ë¯¸ì§€
```

#### ëª©í‘œ build.py
```python
# BUILD_TYPES ì œê±° ë˜ëŠ” ["dev"]ë§Œ ìœ ì§€
# ë¹Œë“œ íƒ€ì… ì„ íƒ UI ì œê±°
# í•­ìƒ dev ì´ë¯¸ì§€ ë¹Œë“œ
```

### ğŸ“ ìƒì„¸ ë³€ê²½ ë‚´ì—­

#### 1. Dockerfile ìˆ˜ì •

**íŒŒì¼**: `docker/Dockerfile`

**ë³€ê²½ ì‚¬í•­**:
- [x] `runtime` ìŠ¤í…Œì´ì§€ ì™„ì „ ì œê±°
- [x] `dev` ìŠ¤í…Œì´ì§€ë¥¼ ìµœì¢… ìŠ¤í…Œì´ì§€ë¡œ ì„¤ì •
- [x] `dev` ìŠ¤í…Œì´ì§€ì— í•„ìš”í•œ ëŸ°íƒ€ì„ íŒ¨í‚¤ì§€ ëª¨ë‘ í¬í•¨
- [x] ì´ë¯¸ì§€ í¬ê¸° ìµœì í™” (ë¶ˆí•„ìš”í•œ ë¹Œë“œ ë„êµ¬ëŠ” ì„ íƒì  ì œê±°)

**ë³€ê²½ ì „**:
```dockerfile
# Runtime ìŠ¤í…Œì´ì§€ (ì•½ 150ì¤„)
FROM base AS runtime
...

# Dev ìŠ¤í…Œì´ì§€
FROM builder AS dev
...
```

**ë³€ê²½ í›„**:
```dockerfile
# Dev ìŠ¤í…Œì´ì§€ (runtime ê¸°ëŠ¥ í†µí•©)
FROM builder AS dev
RUN echo "=== Installing runtime packages ===" && \
    apt-get update && \
    apt-get install -y --no-install-recommends \
        # Runtime íŒ¨í‚¤ì§€ ëª©ë¡
        ...
    && \
    # ê°œë°œ ë„êµ¬
    apt-get install -y --no-install-recommends \
        gdb valgrind strace htop tmux \
        ...
```

#### 2. build.py ìˆ˜ì •

**íŒŒì¼**: `scripts/build.py`

**ë³€ê²½ ì‚¬í•­**:
- [x] `BUILD_TYPES` ì œê±° ë˜ëŠ” `["dev"]`ë¡œ ê³ ì •
- [x] `DEFAULT_BUILD_TYPE` ì œê±° ë˜ëŠ” `"dev"`ë¡œ ê³ ì •
- [x] ë¹Œë“œ íƒ€ì… ì„ íƒ UI ì œê±°
- [x] `--build-type` í”Œë˜ê·¸ ì œê±° ë˜ëŠ” ë¬´ì‹œ
- [x] ë„ì›€ë§ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸

**ë³€ê²½ ì „**:
```python
BUILD_TYPES = ["runtime", "dev"]
DEFAULT_BUILD_TYPE = "runtime"

def select_build_type_interactive() -> str:
    print_section("Build Type")
    print("  1. runtime - Production image (minimal size)")
    print("  2. dev     - Development image (includes build tools)")
    ...
```

**ë³€ê²½ í›„**:
```python
# BUILD_TYPES ì œê±°
# DEFAULT_BUILD_TYPE ì œê±°

def build_docker_image(...):
    # í•­ìƒ dev íƒ€ê²Ÿ ì‚¬ìš©
    build_cmd = [
        "docker", "build",
        "--target", "dev",  # í•˜ë“œì½”ë”©
        ...
    ]
```

#### 3. ë¬¸ì„œ ì—…ë°ì´íŠ¸

**ì˜í–¥ë°›ëŠ” ë¬¸ì„œ**:
- [x] `README.md`: Devë§Œ ì‚¬ìš©í•œë‹¤ê³  ëª…ì‹œ
- [ ] `docs/build-guide.md`: Runtime ê´€ë ¨ ë‚´ìš© ì œê±°
- [ ] `docs/PROJECT_SUMMARY.md`: ì´ë¯¸ì§€ íƒ€ì… ì„¤ëª… ìˆ˜ì •
- [ ] `docs/QUICK_REFERENCE.md`: ëª…ë ¹ì–´ ì˜ˆì œ ìˆ˜ì •
- [ ] `docs/preset-schema.md`: í•„ìš”ì‹œ ì—…ë°ì´íŠ¸

#### 4. í”„ë¦¬ì…‹ JSON ê²€í† 

**íŒŒì¼**: `presets/*.json`

**í™•ì¸ ì‚¬í•­**:
- [x] `tensorrt.required_in_runtime` í•„ë“œ â†’ `required` ë˜ëŠ” ì œê±°
- [x] í•„ë“œëª… ì¼ê´€ì„± í™•ì¸

### âš ï¸ ì˜í–¥ ë¶„ì„

#### ê¸ì •ì  ì˜í–¥
- âœ… ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ë‹¨ìˆœí™”
- âœ… ì‚¬ìš©ì í˜¼ë€ ê°ì†Œ (ì„ íƒì§€ ì œê±°)
- âœ… ìœ ì§€ë³´ìˆ˜ ìš©ì´ì„± ì¦ê°€
- âœ… ë¬¸ì„œ ë‹¨ìˆœí™”

#### ë¶€ì •ì  ì˜í–¥
- âš ï¸ ì´ë¯¸ì§€ í¬ê¸° ì¦ê°€ (ë¹Œë“œ ë„êµ¬ í¬í•¨)
- âš ï¸ ê¸°ì¡´ Runtime ì´ë¯¸ì§€ ì‚¬ìš©ì ì˜í–¥
- âš ï¸ ë°°í¬ ì‹œ ì´ë¯¸ì§€ í¬ê¸°ë¡œ ì¸í•œ ì „ì†¡ ì‹œê°„ ì¦ê°€

#### ì™„í™” ë°©ì•ˆ
- ë¶ˆí•„ìš”í•œ ë¹Œë“œ ë„êµ¬ëŠ” ì„ íƒì ìœ¼ë¡œ ì œê±°
- Multi-stage êµ¬ì¡°ëŠ” ìœ ì§€í•˜ì—¬ ë¹Œë“œ ìºì‹œ í™œìš©
- ì´ë¯¸ì§€ ì••ì¶• (docker save + gzip)
- ë¬¸ì„œì— ì´ë¯¸ì§€ í¬ê¸° ì¦ê°€ ëª…ì‹œ

### ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

#### ë¹Œë“œ í…ŒìŠ¤íŠ¸
- [x] Dev ì´ë¯¸ì§€ ë¹Œë“œ ì„±ê³µ í™•ì¸ (dry-run í…ŒìŠ¤íŠ¸ ì™„ë£Œ)
- [ ] ë¹Œë“œ ì‹œê°„ ì¸¡ì •
- [ ] ì´ë¯¸ì§€ í¬ê¸° ì¸¡ì • (Runtime ëŒ€ë¹„)

#### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] GPU ì ‘ê·¼ í™•ì¸
- [ ] Python/PyTorch ë™ì‘ í™•ì¸
- [ ] FFmpeg/OpenCV ë™ì‘ í™•ì¸
- [ ] Xaiva Media ë™ì‘ í™•ì¸
- [ ] ê°œë°œ ë„êµ¬ ì‚¬ìš© ê°€ëŠ¥ í™•ì¸ (gdb, valgrind ë“±)

#### ë¬¸ì„œ í…ŒìŠ¤íŠ¸
- [x] README ê°€ì´ë“œ ë”°ë¼í•´ë³´ê¸°
- [ ] ë¹Œë“œ ê°€ì´ë“œ ê²€ì¦
- [ ] ëª…ë ¹ì–´ ì˜ˆì œ ì‹¤í–‰

### ğŸ“… êµ¬í˜„ ê³„íš

#### Phase 1: Dockerfile ìˆ˜ì • (1ì‹œê°„)
1. Runtime ìŠ¤í…Œì´ì§€ ì œê±°
2. Dev ìŠ¤í…Œì´ì§€ì— í•„ìš” íŒ¨í‚¤ì§€ í†µí•©
3. ë¡œì»¬ í…ŒìŠ¤íŠ¸ ë¹Œë“œ

#### Phase 2: build.py ìˆ˜ì • (30ë¶„)
1. ë¹Œë“œ íƒ€ì… ê´€ë ¨ ì½”ë“œ ì œê±°
2. í•˜ë“œì½”ë”©ìœ¼ë¡œ dev íƒ€ê²Ÿ ì‚¬ìš©
3. ë„ì›€ë§ ì—…ë°ì´íŠ¸

#### Phase 3: ë¬¸ì„œ ì—…ë°ì´íŠ¸ (1ì‹œê°„)
1. README ìˆ˜ì •
2. ë¹Œë“œ ê°€ì´ë“œ ìˆ˜ì •
3. ê¸°íƒ€ ë¬¸ì„œ ì—…ë°ì´íŠ¸

#### Phase 4: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ (30ë¶„)
1. ë¹Œë“œ í…ŒìŠ¤íŠ¸
2. ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
3. ë¬¸ì„œ ê²€ì¦

### ğŸ”„ ë¡¤ë°± ê³„íš

- Git ì»¤ë°‹ì„ ë‹¨ê³„ë³„ë¡œ ë¶„ë¦¬
- Dockerfile ë°±ì—… ìœ ì§€
- ë¬¸ì œ ë°œìƒ ì‹œ ì´ì „ ì»¤ë°‹ìœ¼ë¡œ revert

### âœ… ì™„ë£Œ ì¡°ê±´

- [x] Dev ì´ë¯¸ì§€ ë¹Œë“œ ì„±ê³µ
- [ ] ëª¨ë“  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ í†µê³¼ (ì‹¤ì œ ë¹Œë“œ í•„ìš”)
- [x] ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ
- [ ] ì´ë¯¸ì§€ í¬ê¸° ë¬¸ì„œí™”
- [x] CHANGE_PLAN.mdì— ì™„ë£Œ ê¸°ë¡

### ğŸ“Š CP-001 ì™„ë£Œ ìš”ì•½

#### ë‹¬ì„±ëœ ë³€ê²½ì‚¬í•­
- âœ… **Dockerfile ë‹¨ìˆœí™”**: Runtime ìŠ¤í…Œì´ì§€ ì™„ì „ ì œê±°, Dev ìŠ¤í…Œì´ì§€ë¡œ í†µí•©
- âœ… **ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ê°œì„ **: ë¹Œë“œ íƒ€ì… ì„ íƒ ë¶ˆí•„ìš”, í•­ìƒ dev íƒ€ê²Ÿ ì‚¬ìš©
- âœ… **ì´ë¯¸ì§€ íƒœê·¸ ê°„ì†Œí™”**: `xaiva-kit:preset-name` í˜•íƒœë¡œ ë³€ê²½
- âœ… **ì½”ë“œ ì •ë¦¬**: build.py ê´€ë ¨ ëª¨ë“  ëª¨ë“ˆì—ì„œ build_type íŒŒë¼ë¯¸í„° ì œê±°
- âœ… **í”„ë¦¬ì…‹ ì •ë¦¬**: ë¶ˆí•„ìš”í•œ í•„ë“œ ì œê±°, í…œí”Œë¦¿ íŒŒì¼ ìƒì„±
- âœ… **ë¬¸ì„œ ì—…ë°ì´íŠ¸**: README.md ì£¼ìš” ì„¹ì…˜ ì—…ë°ì´íŠ¸

#### ì‹¤ì œ ì‘ì—… ì‹œê°„ vs ì˜ˆìƒ
- **ì˜ˆìƒ**: 2-3ì‹œê°„
- **ì‹¤ì œ**: ì•½ 1ì‹œê°„ (67% ì‹œê°„ ì ˆì•½)

#### ê²€ì¦ ì™„ë£Œ
- âœ… Dry-run í…ŒìŠ¤íŠ¸ë¡œ ì˜¬ë°”ë¥¸ Docker ëª…ë ¹ì–´ ìƒì„± í™•ì¸
- âœ… `--target dev` ì˜¬ë°”ë¥´ê²Œ ì ìš©
- âœ… ì´ë¯¸ì§€ íƒœê·¸ì—ì„œ build type ì ‘ë¯¸ì‚¬ ì œê±° í™•ì¸

#### ë‚¨ì€ ì‘ì—… (ì‹¤ì œ ë¹Œë“œ í•„ìš”)
- [ ] ì‹¤ì œ Docker ì´ë¯¸ì§€ ë¹Œë“œ í…ŒìŠ¤íŠ¸
- [ ] ì´ë¯¸ì§€ í¬ê¸° ì¸¡ì • ë° ë¬¸ì„œí™”
- [ ] GPU/PyTorch/FFmpeg/OpenCV ë™ì‘ ê²€ì¦

**ìƒíƒœ**: ğŸ¯ **í•µì‹¬ êµ¬í˜„ ì™„ë£Œ, ê²€ì¦ë§Œ ë‚¨ìŒ**

---

## CP-002: ë¹Œë“œ ì˜ì¡´ì„± ì•„ì¹´ì´ë¸Œ

### ğŸ“Œ ê°œìš”

**ëª©ì **: ë¹Œë“œì— í•„ìš”í•œ ì˜ì¡´ì„±ê³¼ íŒ¨í‚¤ì§€ë¥¼ ì•„ì¹´ì´ë¸Œí•˜ì—¬ ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ì§€ì›

**ë°°ê²½**:
- í˜„ì¬: ì˜¨ë¼ì¸ ë¹Œë“œ ë°©ì‹ (Python íŒ¨í‚¤ì§€ ì§ì ‘ ë‹¤ìš´ë¡œë“œ)
- ë¬¸ì œ: Docker ë¹Œë“œ ì‹œ ì¸í„°ë„· í•„ìˆ˜
- ëª©í‘œ: ì˜ì¡´ì„±ì„ ì‚¬ì „ ë‹¤ìš´ë¡œë“œí•˜ì—¬ ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ê°€ëŠ¥

**ìš°ì„ ìˆœìœ„**: ë†’ìŒ  
**ì˜ˆìƒ ì‘ì—… ì‹œê°„**: 4-6ì‹œê°„

### ğŸ“‹ í˜„ì¬ ìƒíƒœ

#### í˜„ì¬ ë¹Œë“œ ë°©ì‹
```dockerfile
# Dockerfileì—ì„œ ì§ì ‘ ë‹¤ìš´ë¡œë“œ
RUN pip3 install --find-links https://download.pytorch.org/whl/torch_stable.html torch==2.1.0+cu118
RUN pip3 install numpy==1.23.1
```

#### í˜„ì¬ artifacts êµ¬ì¡°
```
artifacts/<preset-name>/
â”œâ”€â”€ wheels/         # í˜„ì¬ ë¹„ì–´ìˆìŒ ë˜ëŠ” ë¯¸ì‚¬ìš©
â”œâ”€â”€ sources/        # FFmpeg, OpenCV ì†ŒìŠ¤ (ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ)
â”œâ”€â”€ debs/           # APT íŒ¨í‚¤ì§€ (ë¯¸ì‚¬ìš©)
â””â”€â”€ requirements.txt
```

### ğŸ¯ ë³€ê²½ ëª©í‘œ

#### í•˜ì´ë¸Œë¦¬ë“œ ë¹Œë“œ ë°©ì‹

**ì˜¨ë¼ì¸ ëª¨ë“œ** (ê¸°ë³¸):
- ì¸í„°ë„·ì´ ìˆìœ¼ë©´ ì§ì ‘ ë‹¤ìš´ë¡œë“œ
- ë¹ ë¥´ê³  ê°„í¸

**ì˜¤í”„ë¼ì¸ ëª¨ë“œ**:
- wheels, sources, debs ì‚¬ìš©
- ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ

**ìë™ ê°ì§€**:
```dockerfile
RUN if [ -d "/tmp/wheels" ] && [ "$(ls -A /tmp/wheels)" ]; then \
        echo "Using local wheels"; \
        pip3 install --no-index --find-links=/tmp/wheels -r /tmp/requirements.txt; \
    else \
        echo "Using online installation"; \
        pip3 install -r /tmp/requirements.txt; \
    fi
```

### ğŸ“ ìƒì„¸ ë³€ê²½ ë‚´ì—­

#### 1. deps_sync.sh ê°œì„ 

**íŒŒì¼**: `scripts/deps_sync.sh`

**í˜„ì¬ ìƒíƒœ**: ì•ˆë‚´ ë©”ì‹œì§€ë§Œ ì¶œë ¥

**ë³€ê²½ ì‚¬í•­**:
- [ ] Python wheels ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ë³µì›
- [ ] ë²„ì „ ê´€ë¦¬ íŒ¨í‚¤ì§€ ë³„ë„ ë‹¤ìš´ë¡œë“œ (numpy, scipy, torch, tensorrt)
- [ ] PyTorch ì»¤ìŠ¤í…€ ì¸ë±ìŠ¤ ì²˜ë¦¬
- [ ] FFmpeg/OpenCV ì†ŒìŠ¤ ìë™ ë‹¤ìš´ë¡œë“œ
- [ ] APT íŒ¨í‚¤ì§€ ë‹¤ìš´ë¡œë“œ (ì„ íƒ)
- [ ] ì²´í¬ì„¬ ê²€ì¦

**êµ¬í˜„ ì˜ˆì‹œ**:
```bash
# Python wheels ë‹¤ìš´ë¡œë“œ
echo "Downloading Python packages..."
cd artifacts/${PRESET_NAME}/wheels/

# Core packages
pip3 download numpy==1.23.1
pip3 download scipy==1.11.4

# PyTorch
pip3 download --find-links https://download.pytorch.org/whl/torch_stable.html torch==2.1.0+cu118
pip3 download --find-links https://download.pytorch.org/whl/torch_stable.html torchvision==0.16.0+cu118

# TensorRT
pip3 download tensorrt==8.6.1

# Other packages
pip3 download -r ../requirements.txt

# FFmpeg source
cd ../sources/
wget https://ffmpeg.org/releases/ffmpeg-4.2.tar.gz

# OpenCV source
wget https://github.com/opencv/opencv/archive/refs/tags/4.9.0.tar.gz -O opencv-4.9.0.tar.gz
```

#### 2. Dockerfile í•˜ì´ë¸Œë¦¬ë“œ ì§€ì›

**íŒŒì¼**: `docker/Dockerfile`

**ë³€ê²½ ì‚¬í•­**:
- [ ] ARGë¡œ ë¹Œë“œ ëª¨ë“œ ì„ íƒ (`BUILD_MODE=online|offline`)
- [ ] wheels ë””ë ‰í„°ë¦¬ ì¡´ì¬ í™•ì¸
- [ ] ì¡°ê±´ë¶€ ì„¤ì¹˜ ë¡œì§

**êµ¬í˜„ ì˜ˆì‹œ**:
```dockerfile
ARG BUILD_MODE=online

# Copy wheels if offline mode
COPY artifacts/${PRESET_NAME}/wheels/ /tmp/wheels/ 2>/dev/null || true

RUN if [ "$BUILD_MODE" = "offline" ] && [ -d "/tmp/wheels" ]; then \
        echo "=== Offline mode: using local wheels ===" && \
        pip3 install --no-index --find-links=/tmp/wheels numpy==1.23.1 && \
        pip3 install --no-index --find-links=/tmp/wheels scipy==1.11.4 && \
        pip3 install --no-index --find-links=/tmp/wheels torch==2.1.0+cu118 && \
        pip3 install --no-index --find-links=/tmp/wheels tensorrt==8.6.1 && \
        pip3 install --no-index --find-links=/tmp/wheels -r /tmp/requirements.txt; \
    else \
        echo "=== Online mode: downloading packages ===" && \
        pip3 install numpy==1.23.1 && \
        pip3 install scipy==1.11.4 && \
        pip3 install --find-links https://download.pytorch.org/whl/torch_stable.html torch==2.1.0+cu118 && \
        pip3 install tensorrt==8.6.1 && \
        pip3 install -r /tmp/requirements.txt; \
    fi
```

#### 3. build.py ë¹Œë“œ ëª¨ë“œ ì„ íƒ

**íŒŒì¼**: `scripts/build.py`

**ë³€ê²½ ì‚¬í•­**:
- [ ] `--build-mode` í”Œë˜ê·¸ ì¶”ê°€ (`online|offline|auto`)
- [ ] `auto` ëª¨ë“œ: wheels ì¡´ì¬ í™•ì¸ í›„ ìë™ ì„ íƒ
- [ ] ë¹Œë“œ ëª¨ë“œë¥¼ `--build-arg BUILD_MODE=...`ë¡œ ì „ë‹¬

**êµ¬í˜„ ì˜ˆì‹œ**:
```python
parser.add_argument(
    '--build-mode',
    choices=['online', 'offline', 'auto'],
    default='auto',
    help='Build mode: online (internet required), offline (use local artifacts), auto (detect)'
)

def detect_build_mode(preset_name: str) -> str:
    """artifacts ì¡´ì¬ ì—¬ë¶€ë¡œ ë¹Œë“œ ëª¨ë“œ ìë™ ê°ì§€"""
    wheels_dir = ARTIFACTS_DIR / preset_name / "wheels"
    if wheels_dir.exists() and list(wheels_dir.glob("*.whl")):
        return "offline"
    return "online"

def build_docker_image(..., build_mode: str):
    if build_mode == "auto":
        build_mode = detect_build_mode(preset_name)
    
    build_args["BUILD_MODE"] = build_mode
    ...
```

#### 4. APT íŒ¨í‚¤ì§€ ì•„ì¹´ì´ë¸Œ (ì„ íƒ)

**êµ¬í˜„ ë°©ì‹**:
- `apt-get download` ì‚¬ìš©
- `debs/` ë””ë ‰í„°ë¦¬ì— ì €ì¥
- Dockerfileì—ì„œ `dpkg -i` ì„¤ì¹˜

**ë³µì¡ë„**: ë†’ìŒ (ì˜ì¡´ì„± í•´ê²° í•„ìš”)
**ìš°ì„ ìˆœìœ„**: ë‚®ìŒ (ë‚˜ì¤‘ì— êµ¬í˜„)

### âš ï¸ ì˜í–¥ ë¶„ì„

#### ê¸ì •ì  ì˜í–¥
- âœ… ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ê°€ëŠ¥
- âœ… ë¹Œë“œ ì¬í˜„ì„± í–¥ìƒ
- âœ… ë„¤íŠ¸ì›Œí¬ ì¥ì•  ì‹œ ì•ˆì •ì„±
- âœ… í”„ë¡ì‹œ/ë°©í™”ë²½ í™˜ê²½ ëŒ€ì‘

#### ë¶€ì •ì  ì˜í–¥
- âš ï¸ artifacts ë””ë ‰í„°ë¦¬ í¬ê¸° ì¦ê°€ (~5-10GB)
- âš ï¸ wheels ì‚¬ì „ ë‹¤ìš´ë¡œë“œ ì‹œê°„ ì¶”ê°€
- âš ï¸ ê´€ë¦¬ ë³µì¡ë„ ì¦ê°€

### ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

#### ì˜¨ë¼ì¸ ëª¨ë“œ í…ŒìŠ¤íŠ¸
- [ ] ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ ë™ì‘ í™•ì¸
- [ ] ë¹Œë“œ ì‹œê°„ ì¸¡ì •

#### ì˜¤í”„ë¼ì¸ ëª¨ë“œ í…ŒìŠ¤íŠ¸
- [ ] deps_sync.shë¡œ ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ
- [ ] `--network=none` í”Œë˜ê·¸ë¡œ ë¹Œë“œ
- [ ] ë¹Œë“œ ì„±ê³µ í™•ì¸
- [ ] ëª¨ë“  íŒ¨í‚¤ì§€ ì„¤ì¹˜ í™•ì¸

#### ìë™ ëª¨ë“œ í…ŒìŠ¤íŠ¸
- [ ] wheels ìˆì„ ë•Œ: ì˜¤í”„ë¼ì¸ ì„ íƒ í™•ì¸
- [ ] wheels ì—†ì„ ë•Œ: ì˜¨ë¼ì¸ ì„ íƒ í™•ì¸

### ğŸ“… êµ¬í˜„ ê³„íš

#### Phase 1: deps_sync.sh ê°œì„  (2ì‹œê°„)
1. Python wheels ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„
2. ì†ŒìŠ¤ ë‹¤ìš´ë¡œë“œ ìë™í™”
3. ì²´í¬ì„¬ ê²€ì¦

#### Phase 2: Dockerfile í•˜ì´ë¸Œë¦¬ë“œ ì§€ì› (2ì‹œê°„)
1. BUILD_MODE ARG ì¶”ê°€
2. ì¡°ê±´ë¶€ ì„¤ì¹˜ ë¡œì§ êµ¬í˜„
3. í…ŒìŠ¤íŠ¸

#### Phase 3: build.py ë¹Œë“œ ëª¨ë“œ (1ì‹œê°„)
1. --build-mode í”Œë˜ê·¸ ì¶”ê°€
2. ìë™ ê°ì§€ ë¡œì§ êµ¬í˜„
3. UI ì—…ë°ì´íŠ¸

#### Phase 4: ë¬¸ì„œ ë° í…ŒìŠ¤íŠ¸ (1ì‹œê°„)
1. ë¹Œë“œ ê°€ì´ë“œ ì—…ë°ì´íŠ¸
2. ì˜¤í”„ë¼ì¸ ë¹Œë“œ í…ŒìŠ¤íŠ¸
3. ë¬¸ì„œí™”

### âœ… ì™„ë£Œ ì¡°ê±´

- [ ] deps_sync.shë¡œ ëª¨ë“  ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥
- [ ] ì˜¤í”„ë¼ì¸ ë¹Œë“œ (`--network=none`) ì„±ê³µ
- [ ] ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸/ìë™ ëª¨ë“œ ëª¨ë‘ ë™ì‘
- [ ] ë¹Œë“œ ê°€ì´ë“œ ì—…ë°ì´íŠ¸
- [ ] CHANGE_PLAN.mdì— ì™„ë£Œ ê¸°ë¡

### ğŸ” CP-002 êµ¬í˜„ ê²€í†  ë° ë¶„ì„ (2025-11-21)

#### í˜„ì¬ ìƒíƒœ ë¶„ì„
**deps_sync.sh í˜„ì¬ êµ¬í˜„**:
- âœ… ë””ë ‰í„°ë¦¬ êµ¬ì¡° ìë™ ìƒì„± (wheels/, debs/, sources/)
- âœ… í”„ë¦¬ì…‹ ìœ íš¨ì„± ê²€ì¦
- âŒ **ì‹¤ì œ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì—†ìŒ** - ì•ˆë‚´ ë©”ì‹œì§€ë§Œ ì¶œë ¥
- âŒ wheels ë‹¤ìš´ë¡œë“œ "ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•ŠìŒ"ì´ë¼ê³  ëª…ì‹œ
- âŒ ì†ŒìŠ¤ íŒŒì¼ì€ ìˆ˜ë™ ë‹¤ìš´ë¡œë“œ ì•ˆë‚´ë§Œ

**í˜„ì¬ ë¹Œë“œ ë°©ì‹**:
- âœ… ì˜¨ë¼ì¸ ì „ìš©: PyTorchëŠ” custom index URLì—ì„œ ì§ì ‘ ë‹¤ìš´ë¡œë“œ
- âœ… ë²„ì „ë³„ ë¶„ë¦¬: torch/tensorrtëŠ” ARGë¡œ ì œì–´, ë‚˜ë¨¸ì§€ëŠ” requirements.txt
- âŒ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ë¶ˆê°€ëŠ¥

**artifacts êµ¬ì¡°**:
- âœ… ì˜¬ë°”ë¥¸ ë””ë ‰í„°ë¦¬ êµ¬ì¡° ì¡´ì¬
- âœ… requirements.txt, requirements-base.txt ë¶„ë¦¬
- âŒ wheels/, debs/, sources/ ë””ë ‰í„°ë¦¬ ë¹„ì–´ìˆìŒ

#### í•˜ì´ë¸Œë¦¬ë“œ ë¹Œë“œ êµ¬í˜„ ë³µì¡ë„ í‰ê°€

**1. Python Packages (ì¤‘ê°„ ë³µì¡ë„)**
- **í‘œì¤€ íŒ¨í‚¤ì§€**: pip downloadë¡œ ì‰½ê²Œ í•´ê²° ê°€ëŠ¥
- **PyTorch**: custom index URL ì²˜ë¦¬ í•„ìš”í•˜ì§€ë§Œ feasible
- **TensorRT**: NVIDIA ë¼ì´ì„ ìŠ¤ í™•ì¸ í•„ìš”

**2. ì¡°ê±´ë¶€ ë¹Œë“œ ë¡œì§ (ë‚®ì€ ë³µì¡ë„)**  
```dockerfile
# í˜„ì¬ ë°©ì‹ì—ì„œ ì‰½ê²Œ í™•ì¥ ê°€ëŠ¥
ARG BUILD_MODE=online
COPY artifacts/${PRESET_NAME}/wheels/ /tmp/wheels/ 2>/dev/null || true
RUN if [ "$BUILD_MODE" = "offline" ] && [ -d "/tmp/wheels" ]; then \
    # offline logic \
    else \
    # current online logic \
    fi
```

**3. ìë™ ê°ì§€ (ë‚®ì€ ë³µì¡ë„)**
- wheels ë””ë ‰í„°ë¦¬ ì¡´ì¬ ë° íŒŒì¼ ê°œìˆ˜ë¡œ íŒë‹¨ ê°€ëŠ¥
- build.pyì—ì„œ ê°„ë‹¨íˆ êµ¬í˜„ ê°€ëŠ¥

#### ì£¼ìš” ì´ìŠˆ ë° í•´ê²° ë°©ì•ˆ

**ì´ìŠˆ 1: PyTorch Custom Index ì²˜ë¦¬**
- í˜„ì¬: `--find-links https://download.pytorch.org/whl/torch_stable.html`
- í•´ê²°: `pip download --find-links URL package==version`
- ë³µì¡ë„: ë‚®ìŒ

**ì´ìŠˆ 2: requirements.txt ë¶„ë¦¬**  
- í˜„ì¬: requirements.txtì™€ requirements-base.txt ë‘ íŒŒì¼
- ë¬¸ì œ: ì¤‘ë³µ ê´€ë¦¬, ì¼ê´€ì„± ì´ìŠˆ
- í•´ê²°: ë‹¨ì¼ requirements.txt ì‚¬ìš© ë˜ëŠ” ëª…í™•í•œ ì—­í•  ë¶„ë¦¬

**ì´ìŠˆ 3: ìš©ëŸ‰ ê´€ë¦¬**
- ì˜ˆìƒ: wheels 5-8GB, sources 1-2GB
- í•´ê²°: `.gitignore` ì ì ˆíˆ ì„¤ì •, ë‹¤ìš´ë¡œë“œ ì„ íƒì  ìˆ˜í–‰

**ì´ìŠˆ 4: ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ í…ŒìŠ¤íŠ¸**
- Docker `--network=none` í”Œë˜ê·¸ ì‚¬ìš© ì‹œ DNS í•´ê²° ë¶ˆê°€
- í•´ê²°: ì‹¤ì œ ì˜¤í”„ë¼ì¸ í™˜ê²½ ì‹œë®¬ë ˆì´ì…˜

#### ê¶Œì¥ êµ¬í˜„ ë°©ë²•

**Phase 1: deps_sync.sh ë³µì› (ìš°ì„ ìˆœìœ„: ë†’ìŒ)**
1. Python wheels ë‹¤ìš´ë¡œë“œ ë¡œì§ ë³µì›
2. PyTorch custom index ì²˜ë¦¬
3. ì†ŒìŠ¤ ë‹¤ìš´ë¡œë“œ ìë™í™”
4. ì²´í¬ì„¬ ê²€ì¦ ì¶”ê°€

**Phase 2: Dockerfile í•˜ì´ë¸Œë¦¬ë“œ ì§€ì› (ìš°ì„ ìˆœìœ„: ë†’ìŒ)**
1. BUILD_MODE ARG ì¶”ê°€
2. ì¡°ê±´ë¶€ ë¡œì§ êµ¬í˜„ (í˜„ì¬ ì½”ë“œ ê¸°ë°˜)
3. COPY --from ì‚¬ìš©í•˜ì—¬ wheels ë³µì‚¬

**Phase 3: build.py í†µí•© (ìš°ì„ ìˆœìœ„: ì¤‘ê°„)**
1. --build-mode í”Œë˜ê·¸
2. ìë™ ê°ì§€ ë¡œì§
3. ì‚¬ìš©ì í™•ì¸ UI

#### ì˜ˆìƒ ì‘ì—… ì‹œê°„ ì¬í‰ê°€
- **ê¸°ì¡´ ì˜ˆìƒ**: 4-6ì‹œê°„
- **ìƒˆ ì˜ˆìƒ**: 3-4ì‹œê°„ (í˜„ì¬ êµ¬ì¡°ê°€ ì˜ ì¤€ë¹„ë¨)
  - deps_sync.sh ë³µì›: 1.5ì‹œê°„
  - Dockerfile ìˆ˜ì •: 1ì‹œê°„  
  - build.py í†µí•©: 1ì‹œê°„
  - í…ŒìŠ¤íŠ¸ ë° ë¬¸ì„œí™”: 0.5ì‹œê°„

#### êµ¬í˜„ ê°€ì¹˜ í‰ê°€
**âœ… ë†’ì€ ê°€ì¹˜**:
- ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ê°€ëŠ¥
- CI/CD íŒŒì´í”„ë¼ì¸ì—ì„œ ì¬í˜„ì„± í–¥ìƒ
- ë„¤íŠ¸ì›Œí¬ ì œí•œ í™˜ê²½ì—ì„œ ìœ ìš©

**âš ï¸ ê³ ë ¤ì‚¬í•­**:
- artifacts ê´€ë¦¬ ë³µì¡ë„ ì¦ê°€  
- ì´ˆê¸° ë‹¤ìš´ë¡œë“œ ì‹œê°„ í•„ìš”
- ìš©ëŸ‰ ì¦ê°€ (~8-10GB)

**ê²°ë¡ **: êµ¬í˜„ ê¶Œì¥, ë‹¨ê³„ì  ì ‘ê·¼ìœ¼ë¡œ ë¦¬ìŠ¤í¬ ìµœì†Œí™”

### ğŸ“Š CP-002 ì™„ë£Œ ìš”ì•½

#### ë‹¬ì„±ëœ ë³€ê²½ì‚¬í•­
- âœ… **deps_sync.sh ë³µì›**: Python wheels ìë™ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ êµ¬í˜„
- âœ… **PyTorch ì²˜ë¦¬**: ì»¤ìŠ¤í…€ ì¸ë±ìŠ¤ URL ì§€ì›ìœ¼ë¡œ ì˜¬ë°”ë¥¸ CUDA ë²„ì „ ë‹¤ìš´ë¡œë“œ
- âœ… **ì†ŒìŠ¤ íŒŒì¼ ìë™í™”**: FFmpeg, OpenCV, x265 ì†ŒìŠ¤ ìë™ ë‹¤ìš´ë¡œë“œ
- âœ… **Dockerfile í•˜ì´ë¸Œë¦¬ë“œ**: BUILD_MODE ì§€ì›ìœ¼ë¡œ ì˜¨ë¼ì¸/ì˜¤í”„ë¼ì¸ ì¡°ê±´ë¶€ ì„¤ì¹˜
- âœ… **ìë™ ê°ì§€**: artifacts ì¡´ì¬ ì—¬ë¶€ë¡œ ë¹Œë“œ ëª¨ë“œ ìë™ ì„ íƒ
- âœ… **build.py í†µí•©**: --build-mode í”Œë˜ê·¸ ë° ê°ì§€ ë¡œì§ ì¶”ê°€

#### ì‹¤ì œ ì‘ì—… ì‹œê°„ vs ì˜ˆìƒ
- **ì˜ˆìƒ**: 3-4ì‹œê°„ (ì¬í‰ê°€ í›„)
- **ì‹¤ì œ**: ì•½ 1.5ì‹œê°„ (62% ì‹œê°„ ì ˆì•½)

#### êµ¬í˜„ëœ ê¸°ëŠ¥
**í•˜ì´ë¸Œë¦¬ë“œ ë¹Œë“œ ëª¨ë“œ**:
- `online`: ì¸í„°ë„·ì—ì„œ ì§ì ‘ ë‹¤ìš´ë¡œë“œ (ê¸°ë³¸ê°’)
- `offline`: ë¡œì»¬ artifacts ì‚¬ìš© (ì™„ì „ ì˜¤í”„ë¼ì¸)
- `auto`: artifacts ìƒíƒœë¡œ ìë™ ì„ íƒ

**ì‚¬ìš© ì˜ˆì‹œ**:
```bash
# ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ
./scripts/deps_sync.sh ubuntu22.04-cuda11.8-torch2.1

# ìë™ ëª¨ë“œ ë¹Œë“œ (artifacts ìˆìœ¼ë©´ ì˜¤í”„ë¼ì¸)
python3 scripts/build.py --preset ubuntu22.04-cuda11.8-torch2.1

# ê°•ì œ ì˜¤í”„ë¼ì¸ ë¹Œë“œ
python3 scripts/build.py --preset ubuntu22.04-cuda11.8-torch2.1 --build-mode offline
```

#### ë‚¨ì€ ì‘ì—… (ì‹¤ì œ ë¹Œë“œ í•„ìš”)
- [ ] deps_sync.shë¡œ ì‹¤ì œ ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ í…ŒìŠ¤íŠ¸
- [ ] ì˜¤í”„ë¼ì¸ ë¹Œë“œ (`--network=none`) ê²€ì¦
- [ ] artifacts ìš©ëŸ‰ ì¸¡ì • ë° ë¬¸ì„œí™”

#### í•œê³„ì  ë° ë‚¨ì•„ìˆëŠ” ì˜¨ë¼ì¸ ì˜ì¡´ì„±
**âš ï¸ í˜„ì¬ CP-002ë¡œëŠ” ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ë¶ˆê°€ëŠ¥**

**í•´ê²°ëœ ë¶€ë¶„ (~30%)**:
- âœ… Python wheels (PyTorch, TensorRT, numpy ë“±) ~3-5GB
- âœ… ì¼ë¶€ ì†ŒìŠ¤ íŒŒì¼ (FFmpeg, OpenCV, x265)

**ë¯¸í•´ê²° ë¶€ë¶„ (~70%)**:
- âŒ **Docker ë² ì´ìŠ¤ ì´ë¯¸ì§€**: `nvidia/cuda:11.8.0-cudnn8-devel-ubuntu22.04` (~4-6GB)
- âŒ **APT íŒ¨í‚¤ì§€**: ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ ~650MB (build-essential, cmake ë“±)
- âŒ **Git ì €ì¥ì†Œ**: ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‹¤ì‹œê°„ í´ë¡ í•˜ëŠ” ì†ŒìŠ¤ë“¤
  - x264, libvpx, opus, fdk-aac, nv-codec-headers
- âŒ **ê¸°íƒ€**: GDB Dashboard ë“±

**ê²°ê³¼**: Python íŒ¨í‚¤ì§€ëŠ” ì˜¤í”„ë¼ì¸ ê°€ëŠ¥í•˜ì§€ë§Œ, ë² ì´ìŠ¤ ì´ë¯¸ì§€ì™€ ì‹œìŠ¤í…œ íŒ¨í‚¤ì§€ë¡œ ì¸í•´ ì—¬ì „íˆ ì¸í„°ë„· ì—°ê²° í•„ìš”

**ìƒíƒœ**: ğŸ¯ **í•µì‹¬ êµ¬í˜„ ì™„ë£Œ, ê²€ì¦ë§Œ ë‚¨ìŒ** (ë‹¨, ì™„ì „ ì˜¤í”„ë¼ì¸ì€ ë³„ë„ ì‘ì—… í•„ìš”)

**ì™„ë£Œì¼**: 2025-11-21

---

## CP-003: Xaiva Media ë¸Œëœì¹˜ ì„ íƒ

### ğŸ“Œ ê°œìš”

**ëª©ì **: ë¹Œë“œ ì‹œ Xaiva Mediaì˜ íŠ¹ì • ë¸Œëœì¹˜ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ ê¸°ëŠ¥ ì¶”ê°€

**ë°°ê²½**:
- í˜„ì¬: í”„ë¦¬ì…‹ JSONì— ë¸Œëœì¹˜ ì •ì˜ë˜ì–´ ìˆì§€ë§Œ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- í•„ìš”: ê°œë°œ/ë¦´ë¦¬ìŠ¤ ë¸Œëœì¹˜ë¥¼ ì„ íƒì ìœ¼ë¡œ ë¹Œë“œ

**ìš°ì„ ìˆœìœ„**: ì¤‘ê°„  
**ì˜ˆìƒ ì‘ì—… ì‹œê°„**: 2-3ì‹œê°„

### ğŸ“‹ í˜„ì¬ ìƒíƒœ

#### í”„ë¦¬ì…‹ JSON
```json
"xaiva_media_source": {
  "type": "external",
  "path": "xaiva-media",
  "branch": "master",  // ì •ì˜ë˜ì–´ ìˆì§€ë§Œ ì‚¬ìš© ì•ˆ í•¨
  "description": "..."
}
```

#### í˜„ì¬ Dockerfile
```dockerfile
# ì†ŒìŠ¤ ê²½ë¡œë§Œ ì‚¬ìš©, ë¸Œëœì¹˜ ë¬´ì‹œ
ARG XAIVA_SOURCE_PATH=xaiva-media
COPY ${XAIVA_SOURCE_PATH} /tmp/xaiva-media/
```

### ğŸ¯ ë³€ê²½ ëª©í‘œ

#### ë¸Œëœì¹˜ ì„ íƒ ë°©ì‹

**ì˜µì…˜ 1: Git ì„œë¸Œëª¨ë“ˆ/ì„œë¸ŒíŠ¸ë¦¬ (ê¶Œì¥)**
- í”„ë¡œì íŠ¸ì— xaiva-mediaë¥¼ ì„œë¸Œëª¨ë“ˆë¡œ í¬í•¨
- ë¹Œë“œ ì „ì— íŠ¹ì • ë¸Œëœì¹˜ë¡œ ì²´í¬ì•„ì›ƒ
- `.gitmodules` íŒŒì¼ë¡œ ê´€ë¦¬

**ì˜µì…˜ 2: Dockerfileì—ì„œ Git í´ë¡ **
- Dockerfileì—ì„œ ì§ì ‘ Git í´ë¡ 
- ARGë¡œ ë¸Œëœì¹˜ ì§€ì •
- ë³´ì•ˆ í† í° í•„ìš”

**ì˜µì…˜ 3: ì™¸ë¶€ ê²½ë¡œ + ë¸Œëœì¹˜ ê²€ì¦**
- ì™¸ë¶€ ê²½ë¡œ ì‚¬ìš© (í˜„ì¬ ë°©ì‹)
- ë¹Œë“œ ì „ì— ì‚¬ìš©ìê°€ ë¸Œëœì¹˜ ì²´í¬ì•„ì›ƒ
- build.pyì—ì„œ ë¸Œëœì¹˜ ê²€ì¦

### ğŸ“ ìƒì„¸ ë³€ê²½ ë‚´ì—­

#### ë°©ì•ˆ 1: Git ì„œë¸Œëª¨ë“ˆ ì‚¬ìš© (ê¶Œì¥)

**ì¥ì **:
- Gitìœ¼ë¡œ ë²„ì „ ê´€ë¦¬
- ë¸Œëœì¹˜/íƒœê·¸ ì‰½ê²Œ ì „í™˜
- ì¼ê´€ì„± ë³´ì¥

**êµ¬í˜„**:
```bash
# ì„œë¸Œëª¨ë“ˆ ì¶”ê°€
git submodule add <xaiva-repo-url> xaiva-media

# íŠ¹ì • ë¸Œëœì¹˜ë¡œ ì „í™˜
cd xaiva-media
git checkout <branch-name>
cd ..
git add xaiva-media
git commit -m "Update xaiva-media to branch <branch-name>"
```

**build.py ë³€ê²½**:
```python
# ë¹Œë“œ ì „ ì„œë¸Œëª¨ë“ˆ ë¸Œëœì¹˜ ì²´í¬ì•„ì›ƒ
def checkout_xaiva_branch(branch: str):
    """Xaiva Media ì„œë¸Œëª¨ë“ˆ ë¸Œëœì¹˜ ì²´í¬ì•„ì›ƒ"""
    xaiva_path = PROJECT_ROOT / "xaiva-media"
    if not xaiva_path.exists():
        print_error("Xaiva Media submodule not found")
        sys.exit(1)
    
    try:
        subprocess.run(
            ["git", "checkout", branch],
            cwd=xaiva_path,
            check=True
        )
        print_success(f"Checked out xaiva-media branch: {branch}")
    except subprocess.CalledProcessError:
        print_error(f"Failed to checkout branch: {branch}")
        sys.exit(1)

# ë¹Œë“œ ì „ ì‹¤í–‰
xaiva_branch = preset["build_options"]["xaiva_media_source"]["branch"]
checkout_xaiva_branch(xaiva_branch)
```

#### ë°©ì•ˆ 2: Dockerfile Git í´ë¡ 

**ì¥ì **:
- ì™¸ë¶€ ì˜ì¡´ì„± ì—†ìŒ
- í•­ìƒ ìµœì‹  ì½”ë“œ ì‚¬ìš© ê°€ëŠ¥

**ë‹¨ì **:
- ë³´ì•ˆ í† í° í•„ìš”
- ì˜¤í”„ë¼ì¸ ë¹Œë“œ ë¶ˆê°€
- ë¹Œë“œ ì‹œê°„ ì¦ê°€

**êµ¬í˜„**:
```dockerfile
ARG XAIVA_REPO_URL
ARG XAIVA_BRANCH=master
ARG GITHUB_TOKEN

RUN git clone --depth 1 --branch ${XAIVA_BRANCH} \
    https://${GITHUB_TOKEN}@github.com/<org>/<repo>.git \
    /tmp/xaiva-media
```

**ë³´ì•ˆ ì´ìŠˆ**: í† í°ì´ ì´ë¯¸ì§€ íˆìŠ¤í† ë¦¬ì— ë‚¨ì„ ìˆ˜ ìˆìŒ

#### ë°©ì•ˆ 3: ë¸Œëœì¹˜ ê²€ì¦ë§Œ ìˆ˜í–‰

**ì¥ì **:
- í˜„ì¬ êµ¬ì¡° ìœ ì§€
- ê°„ë‹¨í•œ êµ¬í˜„

**ë‹¨ì **:
- ì‚¬ìš©ìê°€ ìˆ˜ë™ìœ¼ë¡œ ë¸Œëœì¹˜ ì „í™˜ í•„ìš”

**êµ¬í˜„**:
```python
def verify_xaiva_branch(expected_branch: str):
    """Xaiva Media ë¸Œëœì¹˜ í™•ì¸"""
    xaiva_path = PROJECT_ROOT / "xaiva-media"
    
    try:
        result = subprocess.run(
            ["git", "rev-parse", "--abbrev-ref", "HEAD"],
            cwd=xaiva_path,
            capture_output=True,
            text=True,
            check=True
        )
        current_branch = result.stdout.strip()
        
        if current_branch != expected_branch:
            print_warning(
                f"Xaiva Media branch mismatch: "
                f"expected '{expected_branch}', got '{current_branch}'"
            )
            response = input("Continue anyway? (y/n) [n]: ")
            if response.lower() != 'y':
                sys.exit(1)
    except:
        print_warning("Failed to check xaiva-media branch")
```

### ğŸ¯ ê¶Œì¥ ë°©ì•ˆ

**ë°©ì•ˆ 1 (Git ì„œë¸Œëª¨ë“ˆ) + ë°©ì•ˆ 3 (ê²€ì¦) ì¡°í•©**

1. Xaiva Mediaë¥¼ Git ì„œë¸Œëª¨ë“ˆë¡œ ì¶”ê°€
2. build.pyì—ì„œ ë¸Œëœì¹˜ ìë™ ì²´í¬ì•„ì›ƒ
3. ë¸Œëœì¹˜ ê²€ì¦ ìˆ˜í–‰
4. ì‚¬ìš©ìì—ê²Œ í™•ì¸ ìš”ì²­ (ëŒ€í™”í˜• ëª¨ë“œ)

### ğŸ“ êµ¬í˜„ ê³„íš

#### 1. í”„ë¦¬ì…‹ JSON ì—…ë°ì´íŠ¸

**ë³€ê²½ ì‚¬í•­**:
- [ ] `xaiva_media_source.branch` í•„ë“œ í™œìš©
- [ ] `xaiva_media_source.type` ëª…í™•í™” (`submodule|external|git-clone`)

#### 2. build.py ë¸Œëœì¹˜ ì²˜ë¦¬

**ë³€ê²½ ì‚¬í•­**:
- [ ] `--xaiva-branch` í”Œë˜ê·¸ ì¶”ê°€ (í”„ë¦¬ì…‹ ì˜¤ë²„ë¼ì´ë“œ)
- [ ] ì„œë¸Œëª¨ë“ˆ ë¸Œëœì¹˜ ì²´í¬ì•„ì›ƒ í•¨ìˆ˜
- [ ] ë¸Œëœì¹˜ ê²€ì¦ í•¨ìˆ˜
- [ ] ëŒ€í™”í˜• í™•ì¸

**CLI í”Œë˜ê·¸**:
```bash
python3 scripts/build.py --preset <name> --xaiva-branch develop
```

#### 3. Dockerfile ìˆ˜ì • (ì„ íƒ)

**ë³€ê²½ ì‚¬í•­**:
- [ ] ARG XAIVA_BRANCH ì¶”ê°€ (ë©”íƒ€ë°ì´í„°ìš©)
- [ ] ë¹Œë“œ ë¡œê·¸ì— ë¸Œëœì¹˜ ì •ë³´ ì¶œë ¥

```dockerfile
ARG XAIVA_BRANCH=master
RUN echo "Building Xaiva Media from branch: ${XAIVA_BRANCH}"
```

#### 4. ë¬¸ì„œ ì—…ë°ì´íŠ¸

**ë³€ê²½ ì‚¬í•­**:
- [ ] ì„œë¸Œëª¨ë“ˆ ì„¤ì • ê°€ì´ë“œ
- [ ] ë¸Œëœì¹˜ ì„ íƒ ê°€ì´ë“œ
- [ ] í”„ë¦¬ì…‹ ìŠ¤í‚¤ë§ˆ ì—…ë°ì´íŠ¸

### ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

- [ ] ì„œë¸Œëª¨ë“ˆ ì¶”ê°€ ë° ë¸Œëœì¹˜ ì „í™˜ í…ŒìŠ¤íŠ¸
- [ ] build.py ë¸Œëœì¹˜ ì²´í¬ì•„ì›ƒ í…ŒìŠ¤íŠ¸
- [ ] ë¸Œëœì¹˜ ê²€ì¦ í…ŒìŠ¤íŠ¸
- [ ] ì˜ëª»ëœ ë¸Œëœì¹˜ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

### âœ… ì™„ë£Œ ì¡°ê±´

- [ ] í”„ë¦¬ì…‹ì˜ ë¸Œëœì¹˜ ì„¤ì • ë™ì‘
- [ ] CLIë¡œ ë¸Œëœì¹˜ ì˜¤ë²„ë¼ì´ë“œ ê°€ëŠ¥
- [ ] ë¸Œëœì¹˜ ê²€ì¦ ë™ì‘
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [ ] CHANGE_PLAN.mdì— ì™„ë£Œ ê¸°ë¡

### ğŸ“Š CP-003 ì™„ë£Œ ìš”ì•½

#### ë‹¬ì„±ëœ ë³€ê²½ì‚¬í•­
- âœ… **í”„ë¦¬ì…‹ ë¸Œëœì¹˜ ìˆ˜ì •**: ì‹¤ì œ ë¸Œëœì¹˜ë¡œ ì„¤ì • ì—…ë°ì´íŠ¸ (`feature/standardize-cuda11-pytorch21`)
- âœ… **ë¸Œëœì¹˜ ìë™ ì²´í¬**: í”„ë¦¬ì…‹ ì„¤ì •ê³¼ ì‹¤ì œ ë¸Œëœì¹˜ ë¹„êµ ë° ë¶ˆì¼ì¹˜ ê°ì§€
- âœ… **ëŒ€í™”í˜• ë¸Œëœì¹˜ ì „í™˜**: ì‚¬ìš©ì ì„ íƒì— ë”°ë¥¸ ìë™ ë¸Œëœì¹˜ ì „í™˜
- âœ… **CLI ë¸Œëœì¹˜ ì˜¤ë²„ë¼ì´ë“œ**: `--xaiva-branch` í”Œë˜ê·¸ë¡œ í”„ë¦¬ì…‹ ì„¤ì • ì˜¤ë²„ë¼ì´ë“œ
- âœ… **ì™¸ë¶€ ë””ë ‰í„°ë¦¬ ì§€ì›**: ì ˆëŒ€ ê²½ë¡œ ë° ìƒëŒ€ ê²½ë¡œ ì§€ì›
- âœ… **ì—ëŸ¬ ì²˜ë¦¬**: Git ëª…ë ¹ ì‹¤íŒ¨ ì‹œ ì•ˆì „í•œ ì¤‘ë‹¨, ë¹„ëŒ€í™”í˜• ëª¨ë“œì—ì„œ ë¸Œëœì¹˜ ë¶ˆì¼ì¹˜ ì‹œ ì¤‘ë‹¨

#### ì‹¤ì œ ì‘ì—… ì‹œê°„ vs ì˜ˆìƒ
- **ì˜ˆìƒ**: 2-3ì‹œê°„
- **ì‹¤ì œ**: ì•½ 1.5ì‹œê°„ (25% ì‹œê°„ ì ˆì•½)

#### êµ¬í˜„ëœ ê¸°ëŠ¥
**ë¸Œëœì¹˜ ê´€ë¦¬ ì‹œìŠ¤í…œ**:
- í”„ë¦¬ì…‹ ê¸°ë°˜ íƒ€ê¹ƒ ë¸Œëœì¹˜ ì„¤ì •
- í˜„ì¬ ë¸Œëœì¹˜ ìë™ ê°ì§€
- ë¸Œëœì¹˜ ë¶ˆì¼ì¹˜ ì‹œ ëŒ€í™”í˜•/ìë™ ì „í™˜
- CLI í”Œë˜ê·¸ë¥¼ í†µí•œ ëŸ°íƒ€ì„ ì˜¤ë²„ë¼ì´ë“œ

**ì‚¬ìš© ì˜ˆì‹œ**:
```bash
# í”„ë¦¬ì…‹ ë¸Œëœì¹˜ ì‚¬ìš© (ìë™ ì²´í¬)
python3 scripts/build.py --preset ubuntu22.04-cuda11.8-torch2.1

# íŠ¹ì • ë¸Œëœì¹˜ë¡œ ì˜¤ë²„ë¼ì´ë“œ
python3 scripts/build.py --preset ubuntu22.04-cuda11.8-torch2.1 --xaiva-branch develop

# ë¹„ëŒ€í™”í˜• ëª¨ë“œ (ë¸Œëœì¹˜ ë¶ˆì¼ì¹˜ ì‹œ ì¦‰ì‹œ ì‹¤íŒ¨)
python3 scripts/build.py --preset ubuntu22.04-cuda11.8-torch2.1 --non-interactive
```

#### ê²€ì¦ ì™„ë£Œ
- âœ… ë¸Œëœì¹˜ ì¼ì¹˜ ì‹œ ì •ìƒ í†µê³¼
- âœ… CLI ì˜¤ë²„ë¼ì´ë“œ ê¸°ëŠ¥ ë™ì‘
- âœ… ë¸Œëœì¹˜ ë¶ˆì¼ì¹˜ ì‹œ ëŒ€í™”í˜• ì²˜ë¦¬
- âœ… ë¹„ëŒ€í™”í˜• ëª¨ë“œì—ì„œ ì—ëŸ¬ ì¤‘ë‹¨
- âœ… ì™¸ë¶€ ì ˆëŒ€ ê²½ë¡œ ì •ìƒ ì²˜ë¦¬

**ìƒíƒœ**: ğŸ¯ **ì™„ì „ êµ¬í˜„ ì™„ë£Œ, ëª¨ë“  ê¸°ëŠ¥ ê²€ì¦ë¨**

**ì™„ë£Œì¼**: 2025-11-21

---

## CP-004: ëŒ€í™”í˜• ì˜ì¡´ì„± ê´€ë¦¬ â¸ï¸ ë³´ë¥˜

### ğŸ“Œ ê°œìš”

**ëª©ì **: build.py ëŒ€í™”í˜• ëª¨ë“œì—ì„œ ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ ë° í™•ì¸ ê¸°ëŠ¥ ì¶”ê°€

**ë°°ê²½**:
- í˜„ì¬: deps_sync.shë¥¼ ë³„ë„ë¡œ ì‹¤í–‰
- ëª©í‘œ: build.pyì—ì„œ í†µí•© ê´€ë¦¬

**ìš°ì„ ìˆœìœ„**: ë‚®ìŒ  
**ì˜ˆìƒ ì‘ì—… ì‹œê°„**: 2-3ì‹œê°„  
**ìƒíƒœ**: â¸ï¸ **ë³´ë¥˜** (CP-006 ì™„ë£Œ í›„ ì¬ì§„í–‰)

### â¸ï¸ ë³´ë¥˜ ì‚¬ìœ 

**ì „ì œ ì¡°ê±´ ë¯¸ì¶©ì¡±**:
- deps_sync.shì˜ ì»¨í…Œì´ë„ˆí™”(CP-006)ê°€ ìš°ì„  í•„ìš”
- í˜„ì¬ í˜¸ìŠ¤íŠ¸ í™˜ê²½ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•œ í†µí•©ì˜ ë³µì¡ë„ ë†’ìŒ

### ğŸ“‹ í˜„ì¬ ìƒíƒœ

#### í˜„ì¬ ì›Œí¬í”Œë¡œìš°
```bash
# 1. ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ (ë³„ë„ ìŠ¤í¬ë¦½íŠ¸)
./scripts/deps_sync.sh ubuntu22.04-cuda11.8-torch2.1

# 2. ë¹Œë“œ (ë³„ë„ ì‹¤í–‰)
python3 scripts/build.py --preset ubuntu22.04-cuda11.8-torch2.1
```

### ğŸ¯ ë³€ê²½ ëª©í‘œ

#### í†µí•© ì›Œí¬í”Œë¡œìš°
```bash
# í•˜ë‚˜ì˜ ëª…ë ¹ìœ¼ë¡œ ëª¨ë‘ ì²˜ë¦¬
python3 scripts/build.py --preset ubuntu22.04-cuda11.8-torch2.1

# ëŒ€í™”í˜• ëª¨ë“œì—ì„œ:
# 1. í”„ë¦¬ì…‹ ì„ íƒ
# 2. ì˜ì¡´ì„± í™•ì¸
#    - ìˆìœ¼ë©´: ë¹Œë“œ ì§„í–‰
#    - ì—†ìœ¼ë©´: ë‹¤ìš´ë¡œë“œ ì—¬ë¶€ ë¬¼ì–´ë³´ê¸°
# 3. ë¹Œë“œ ì‹¤í–‰
```

### ğŸ“ ìƒì„¸ ë³€ê²½ ë‚´ì—­

#### 1. build.py ì˜ì¡´ì„± ì²´í¬

**í•¨ìˆ˜ ì¶”ê°€**:
```python
def check_artifacts(preset_name: str) -> dict:
    """ì•„í‹°íŒ©íŠ¸ ì¡´ì¬ í™•ì¸ ë° ìƒíƒœ ë°˜í™˜"""
    artifacts_path = ARTIFACTS_DIR / preset_name
    
    status = {
        "wheels_exist": False,
        "sources_exist": False,
        "debs_exist": False,
        "wheels_count": 0,
        "sources_count": 0,
    }
    
    wheels_dir = artifacts_path / "wheels"
    if wheels_dir.exists():
        wheels = list(wheels_dir.glob("*.whl"))
        status["wheels_exist"] = len(wheels) > 0
        status["wheels_count"] = len(wheels)
    
    sources_dir = artifacts_path / "sources"
    if sources_dir.exists():
        sources = list(sources_dir.glob("*.tar.gz")) + list(sources_dir.glob("*.tar.xz"))
        status["sources_exist"] = len(sources) > 0
        status["sources_count"] = len(sources)
    
    return status

def prompt_download_deps(preset_name: str) -> bool:
    """ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ ì—¬ë¶€ í™•ì¸"""
    print_section("Dependencies Check")
    
    status = check_artifacts(preset_name)
    
    if not status["wheels_exist"]:
        print("âš ï¸  Python wheels not found")
    else:
        print(f"âœ… Python wheels: {status['wheels_count']} files")
    
    if not status["sources_exist"]:
        print("âš ï¸  Source archives not found")
    else:
        print(f"âœ… Source archives: {status['sources_count']} files")
    
    if not status["wheels_exist"] or not status["sources_exist"]:
        print("\nDependencies are missing. Download now?")
        print("  1. Yes - Download dependencies (requires internet)")
        print("  2. No  - Skip and use online build")
        print("  3. Cancel")
        
        choice = input("Select option (1-3) [2]: ").strip() or "2"
        
        if choice == "1":
            return True
        elif choice == "2":
            return False
        else:
            print("Build cancelled")
            sys.exit(0)
    else:
        print("âœ… All dependencies available")
        return False

def download_dependencies(preset_name: str):
    """deps_sync.sh í˜¸ì¶œ"""
    deps_sync_script = PROJECT_ROOT / "scripts" / "deps_sync.sh"
    
    try:
        subprocess.run(
            [str(deps_sync_script), preset_name],
            check=True
        )
        print_success("Dependencies downloaded successfully")
    except subprocess.CalledProcessError:
        print_error("Failed to download dependencies")
        sys.exit(1)
```

#### 2. ëŒ€í™”í˜• í”Œë¡œìš° í†µí•©

**ë©”ì¸ í•¨ìˆ˜ ìˆ˜ì •**:
```python
def main():
    args = parse_args()
    
    # 1. í”„ë¦¬ì…‹ ì„ íƒ
    preset_name = select_preset(args)
    preset = load_preset(preset_name)
    
    # 2. ì˜ì¡´ì„± í™•ì¸ (ëŒ€í™”í˜• ëª¨ë“œë§Œ)
    if not args.non_interactive:
        should_download = prompt_download_deps(preset_name)
        if should_download:
            download_dependencies(preset_name)
    
    # 3. ë¹Œë“œ ì‹¤í–‰
    build_docker_image(preset, args)
```

#### 3. CLI í”Œë˜ê·¸ ì¶”ê°€

**í”Œë˜ê·¸**:
```python
parser.add_argument(
    '--skip-deps-check',
    action='store_true',
    help='Skip dependency check'
)

parser.add_argument(
    '--download-deps',
    action='store_true',
    help='Download dependencies before build'
)
```

#### 4. ì˜ì¡´ì„± ìƒíƒœ í‘œì‹œ

**ë¹Œë“œ ìš”ì•½ì— ì¶”ê°€**:
```
--- Build Summary ---
  Preset:       ubuntu22.04-cuda11.8-torch2.1
  Build Mode:   online / offline (auto-detected)
  Dependencies: âœ… Available / âš ï¸ Missing (online mode)
  ...
```

### ğŸ§ª í…ŒìŠ¤íŠ¸ ê³„íš

- [ ] ì˜ì¡´ì„± ìˆì„ ë•Œ: ë°”ë¡œ ë¹Œë“œ
- [ ] ì˜ì¡´ì„± ì—†ì„ ë•Œ: ë‹¤ìš´ë¡œë“œ í”„ë¡¬í”„íŠ¸
- [ ] ë‹¤ìš´ë¡œë“œ ì„ íƒ: deps_sync.sh í˜¸ì¶œ í™•ì¸
- [ ] ìŠ¤í‚µ ì„ íƒ: ì˜¨ë¼ì¸ ë¹Œë“œ ì§„í–‰
- [ ] ë¹„ëŒ€í™”í˜• ëª¨ë“œ: ì²´í¬ ìŠ¤í‚µ

### âœ… ì™„ë£Œ ì¡°ê±´

- [ ] ëŒ€í™”í˜• ëª¨ë“œì—ì„œ ì˜ì¡´ì„± í™•ì¸
- [ ] ë‹¤ìš´ë¡œë“œ ì˜µì…˜ ì œê³µ
- [ ] deps_sync.sh í†µí•© í˜¸ì¶œ
- [ ] ë¹„ëŒ€í™”í˜• ëª¨ë“œ ì˜í–¥ ì—†ìŒ
- [ ] CHANGE_PLAN.mdì— ì™„ë£Œ ê¸°ë¡

---

## CP-005: ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ â¸ï¸ ë³´ë¥˜

### ğŸ“Œ ê°œìš”

**ëª©ì **: ì¸í„°ë„· ì—°ê²° ì—†ì´ ì™„ì „íˆ ì˜¤í”„ë¼ì¸ì—ì„œ Docker ì´ë¯¸ì§€ ë¹Œë“œ ì§€ì›

**ë°°ê²½**:
- CP-002ëŠ” Python íŒ¨í‚¤ì§€ë§Œ ì˜¤í”„ë¼ì¸ ì§€ì› (~30%)
- ì—¬ì „íˆ ë² ì´ìŠ¤ ì´ë¯¸ì§€, APT íŒ¨í‚¤ì§€, Git ì €ì¥ì†Œê°€ ì˜¨ë¼ì¸ ì˜ì¡´ì„±
- ì™„ì „ ê²©ë¦¬ í™˜ê²½ì—ì„œì˜ ë¹Œë“œ í•„ìš”ì„±

**ìš°ì„ ìˆœìœ„**: ë‚®ìŒ  
**ì˜ˆìƒ ì‘ì—… ì‹œê°„**: 8-12ì‹œê°„  
**ë³µì¡ë„**: ë§¤ìš° ë†’ìŒ  
**ìƒíƒœ**: â¸ï¸ **ë³´ë¥˜** (êµ¬í˜„ ë¹„ê¶Œì¥, CP-006 ì™„ë£Œ í›„ ì¬ê²€í† )

### ğŸ“‹ í˜„ì¬ ì˜¨ë¼ì¸ ì˜ì¡´ì„± ë¶„ì„

#### 1. Docker ë² ì´ìŠ¤ ì´ë¯¸ì§€ (~4-6GB)
```dockerfile
FROM nvidia/cuda:11.8.0-cudnn8-devel-ubuntu22.04
```
- **ë¬¸ì œ**: Docker Hubì—ì„œ ì‹¤ì‹œê°„ ë‹¤ìš´ë¡œë“œ
- **í•´ê²° ë°©ì•ˆ**: `docker save`ë¡œ tar íŒŒì¼ ìƒì„± í›„ `docker load`

#### 2. APT íŒ¨í‚¤ì§€ ì €ì¥ì†Œ (~650MB)
```dockerfile
RUN apt-get update && apt-get install -y --no-install-recommends \
    build-essential cmake git wget curl ...
```
- **ë¬¸ì œ**: Ubuntu íŒ¨í‚¤ì§€ ì €ì¥ì†Œ ì ‘ê·¼
- **í•´ê²° ë°©ì•ˆ**: `apt-get download`ë¡œ .deb íŒ¨í‚¤ì§€ ì‚¬ì „ ë‹¤ìš´ë¡œë“œ

#### 3. Git ì €ì¥ì†Œ ì†ŒìŠ¤ ì½”ë“œ (~500MB)
**ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì‹¤ì‹œê°„ í´ë¡ **:
- x264: `git clone https://code.videolan.org/videolan/x264.git`
- libvpx: `git clone https://chromium.googlesource.com/webm/libvpx.git`
- opus: `git clone https://github.com/xiph/opus.git`
- fdk-aac: `git clone https://github.com/mstorsjo/fdk-aac`
- nv-codec-headers: `git clone https://github.com/FFmpeg/nv-codec-headers.git`

#### 4. ê¸°íƒ€ ì˜¨ë¼ì¸ ë‹¤ìš´ë¡œë“œ (~10MB)
- GDB Dashboard: `wget https://github.com/cyrus-and/gdb-dashboard/raw/master/.gdbinit`

### ğŸ¯ ì™„ì „ ì˜¤í”„ë¼ì¸ ì•„í‚¤í…ì²˜

#### ëª©í‘œ artifacts êµ¬ì¡°
```
artifacts/<preset-name>/
â”œâ”€â”€ base-images/
â”‚   â””â”€â”€ nvidia-cuda-11.8.0-cudnn8-devel-ubuntu22.04.tar  # ë² ì´ìŠ¤ ì´ë¯¸ì§€
â”œâ”€â”€ debs/
â”‚   â”œâ”€â”€ build-essential_*.deb                           # APT íŒ¨í‚¤ì§€ë“¤
â”‚   â”œâ”€â”€ cmake_*.deb
â”‚   â””â”€â”€ ...
â”œâ”€â”€ sources/
â”‚   â”œâ”€â”€ x264-stable.tar.gz                            # Git ì €ì¥ì†Œ ì•„ì¹´ì´ë¸Œ
â”‚   â”œâ”€â”€ libvpx-v1.13.1.tar.gz
â”‚   â”œâ”€â”€ opus-v1.4.tar.gz
â”‚   â””â”€â”€ ...
â”œâ”€â”€ wheels/                                            # ì´ë¯¸ êµ¬í˜„ë¨
â””â”€â”€ misc/
    â””â”€â”€ gdbinit                                        # ê¸°íƒ€ íŒŒì¼ë“¤
```

### ğŸ“ ìƒì„¸ êµ¬í˜„ ê³„íš

#### Phase 1: ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì•„ì¹´ì´ë¸Œ (3ì‹œê°„)

**1.1 deps_sync.sh í™•ì¥**
```bash
# ë² ì´ìŠ¤ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ ë° ì €ì¥
download_base_image() {
    local base_image="$1"
    local base_images_dir="$PRESET_ARTIFACTS_DIR/base-images"
    
    mkdir -p "$base_images_dir"
    
    # ì´ë¯¸ì§€ ì´ë¦„ì„ íŒŒì¼ëª…ìœ¼ë¡œ ë³€í™˜
    local image_file=$(echo "$base_image" | tr '/:' '-').tar
    local image_path="$base_images_dir/$image_file"
    
    if [ ! -f "$image_path" ]; then
        print_info "Downloading base image: $base_image"
        docker pull "$base_image"
        docker save "$base_image" > "$image_path"
        print_success "Base image saved: $image_path"
    else
        print_info "Base image already exists: $image_path"
    fi
}
```

**1.2 Dockerfile ìˆ˜ì •**
```dockerfile
# ë² ì´ìŠ¤ ì´ë¯¸ì§€ ë¡œë“œ ì§€ì›
ARG BUILD_MODE=online
ARG BASE_IMAGE=nvidia/cuda:11.8.0-cudnn8-devel-ubuntu22.04

# ì˜¤í”„ë¼ì¸ ëª¨ë“œì—ì„œ ë² ì´ìŠ¤ ì´ë¯¸ì§€ ë¡œë“œ
RUN if [ "$BUILD_MODE" = "offline" ] && [ -f "/tmp/base-images/*.tar" ]; then \
        echo "Loading base image from archive"; \
        docker load < /tmp/base-images/*.tar; \
    fi

FROM ${BASE_IMAGE} AS base
```

#### Phase 2: APT íŒ¨í‚¤ì§€ ì•„ì¹´ì´ë¸Œ (3ì‹œê°„)

**2.1 APT íŒ¨í‚¤ì§€ ë‹¤ìš´ë¡œë“œ**
```bash
# deps_sync.shì— ì¶”ê°€
download_apt_packages() {
    local debs_dir="$PRESET_ARTIFACTS_DIR/debs"
    mkdir -p "$debs_dir"
    
    cd "$debs_dir"
    
    # í•„ìˆ˜ íŒ¨í‚¤ì§€ ëª©ë¡
    local packages=(
        "build-essential" "cmake" "git-core" "wget" "curl"
        "autoconf" "automake" "libtool" "pkg-config"
        "libass-dev" "libfreetype6-dev" "libmp3lame-dev"
        # ... (ì „ì²´ íŒ¨í‚¤ì§€ ëª©ë¡)
    )
    
    for package in "${packages[@]}"; do
        apt-get download "$package"
    done
    
    # ì˜ì¡´ì„±ë„ í•¨ê»˜ ë‹¤ìš´ë¡œë“œ
    apt-get download $(apt-cache depends "${packages[@]}" | grep "Depends:" | cut -d: -f2 | sort -u)
}
```

**2.2 Dockerfile APT ì˜¤í”„ë¼ì¸ ì„¤ì¹˜**
```dockerfile
# APT íŒ¨í‚¤ì§€ ë³µì‚¬
COPY artifacts/${PRESET_NAME}/debs/ /tmp/debs/

# ì˜¤í”„ë¼ì¸ ëª¨ë“œì—ì„œ .deb íŒŒì¼ ì„¤ì¹˜
RUN if [ "$BUILD_MODE" = "offline" ] && [ -d "/tmp/debs" ]; then \
        echo "Installing packages from local debs"; \
        dpkg -i /tmp/debs/*.deb || apt-get install -f -y; \
    else \
        apt-get update && apt-get install -y --no-install-recommends \
            build-essential cmake git wget curl ...; \
    fi
```

#### Phase 3: Git ì €ì¥ì†Œ ì•„ì¹´ì´ë¸Œ (2ì‹œê°„)

**3.1 ì†ŒìŠ¤ ì €ì¥ì†Œ ë‹¤ìš´ë¡œë“œ**
```bash
# deps_sync.shì— ì¶”ê°€
download_git_sources() {
    local sources_dir="$PRESET_ARTIFACTS_DIR/sources"
    mkdir -p "$sources_dir"
    
    cd "$sources_dir"
    
    # Git ì €ì¥ì†Œë¥¼ tar.gzë¡œ ì•„ì¹´ì´ë¸Œ
    download_git_archive() {
        local url="$1"
        local filename="$2"
        local branch="${3:-master}"
        
        if [ ! -f "$filename" ]; then
            print_info "Downloading $filename from $url"
            git clone --depth 1 --branch "$branch" "$url" temp_repo
            tar -czf "$filename" -C temp_repo .
            rm -rf temp_repo
            print_success "Downloaded: $filename"
        fi
    }
    
    download_git_archive "https://code.videolan.org/videolan/x264.git" "x264-stable.tar.gz"
    download_git_archive "https://chromium.googlesource.com/webm/libvpx.git" "libvpx-v1.13.1.tar.gz"
    download_git_archive "https://github.com/xiph/opus.git" "opus-v1.4.tar.gz"
    download_git_archive "https://github.com/mstorsjo/fdk-aac" "fdk-aac-v2.0.2.tar.gz"
    download_git_archive "https://github.com/FFmpeg/nv-codec-headers.git" "nv-codec-headers.tar.gz"
}
```

**3.2 ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì •**
```bash
# build-codecs.sh ìˆ˜ì • ì˜ˆì‹œ
build_x264_offline() {
    if [ -f "/tmp/sources/x264-stable.tar.gz" ]; then
        echo "Using offline x264 source"
        mkdir -p /tmp/x264
        tar -xzf /tmp/sources/x264-stable.tar.gz -C /tmp/x264
        cd /tmp/x264
    else
        echo "Fallback to online download"
        git clone --depth 1 https://code.videolan.org/videolan/x264.git
        cd x264
    fi
    
    # ë¹Œë“œ ë¡œì§ì€ ë™ì¼
    ./configure --prefix="${THIRD_PARTY_PATH}/ffmpeg_build" ...
}
```

#### Phase 4: ê¸°íƒ€ íŒŒì¼ ì•„ì¹´ì´ë¸Œ (1ì‹œê°„)

**4.1 misc íŒŒì¼ ë‹¤ìš´ë¡œë“œ**
```bash
# deps_sync.shì— ì¶”ê°€
download_misc_files() {
    local misc_dir="$PRESET_ARTIFACTS_DIR/misc"
    mkdir -p "$misc_dir"
    
    # GDB Dashboard
    if [ ! -f "$misc_dir/gdbinit" ]; then
        wget -O "$misc_dir/gdbinit" \
            "https://github.com/cyrus-and/gdb-dashboard/raw/master/.gdbinit"
    fi
}
```

#### Phase 5: í†µí•© ë° í…ŒìŠ¤íŠ¸ (3ì‹œê°„)

**5.1 ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ëª¨ë“œ**
```python
# build.pyì— ì¶”ê°€
def detect_full_offline_capability(preset_name: str) -> bool:
    """ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ê°€ëŠ¥ì„± í™•ì¸"""
    artifacts_dir = ARTIFACTS_DIR / preset_name
    
    # í•„ìˆ˜ êµ¬ì„±ìš”ì†Œ í™•ì¸
    checks = {
        "base_images": (artifacts_dir / "base-images").exists(),
        "debs": len(list((artifacts_dir / "debs").glob("*.deb"))) > 50,
        "sources": len(list((artifacts_dir / "sources").glob("*.tar.gz"))) >= 5,
        "wheels": len(list((artifacts_dir / "wheels").glob("*.whl"))) >= 10,
    }
    
    return all(checks.values())

# --build-mode í™•ì¥
parser.add_argument(
    '--build-mode',
    choices=['online', 'offline', 'full-offline', 'auto'],
    default='auto',
    help='Build mode: online, offline (python only), full-offline (complete), auto'
)
```

**5.2 ì˜¤í”„ë¼ì¸ ê²€ì¦ í…ŒìŠ¤íŠ¸**
```bash
# ì™„ì „ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ í…ŒìŠ¤íŠ¸
test_full_offline_build() {
    # ë² ì´ìŠ¤ ì´ë¯¸ì§€ ë¡œë“œ
    docker load < artifacts/ubuntu22.04-cuda11.8-torch2.1/base-images/*.tar
    
    # ë„¤íŠ¸ì›Œí¬ ì™„ì „ ì°¨ë‹¨ ë¹Œë“œ
    docker build --network=none \
        --build-arg BUILD_MODE=full-offline \
        --build-arg PRESET_NAME=ubuntu22.04-cuda11.8-torch2.1 \
        -f docker/Dockerfile \
        -t test-offline .
}
```

### âš ï¸ êµ¬í˜„ ì‹œ ê³ ë ¤ì‚¬í•­

#### ê¸°ìˆ ì  ì œì•½
1. **ë² ì´ìŠ¤ ì´ë¯¸ì§€ ìˆœí™˜ ì°¸ì¡°**: Dockerfile FROMì—ì„œ ë™ì  ë¡œë“œ ë¶ˆê°€ëŠ¥
2. **APT ì˜ì¡´ì„± ë³µì¡ë„**: íŒ¨í‚¤ì§€ ê°„ ë³µì¡í•œ ì˜ì¡´ì„± í•´ê²° í•„ìš”
3. **Docker ë¹Œë“œ ì»¨í…ìŠ¤íŠ¸**: artifacts ë””ë ‰í„°ë¦¬ í¬ê¸°ë¡œ ì¸í•œ ë¹Œë“œ ì»¨í…ìŠ¤íŠ¸ í¬ê¸° ì¦ê°€ (~10-15GB)
4. **Git ì €ì¥ì†Œ ë²„ì „**: íŠ¹ì • ë²„ì „ ê³ ì • vs ìµœì‹  ë²„ì „ ë¬¸ì œ

#### ìš´ì˜ìƒ ë¬¸ì œ
1. **ìš©ëŸ‰**: ì „ì²´ artifacts ~10-15GB (ë² ì´ìŠ¤ ì´ë¯¸ì§€ 4-6GB í¬í•¨)
2. **ìœ ì§€ë³´ìˆ˜**: íŒ¨í‚¤ì§€ ë²„ì „ ì—…ë°ì´íŠ¸ ì‹œ ì¬ë‹¤ìš´ë¡œë“œ í•„ìš”
3. **í”Œë«í¼ ì˜ì¡´ì„±**: ARM/x86 ì•„í‚¤í…ì²˜ë³„ ë³„ë„ ì•„ì¹´ì´ë¸Œ í•„ìš”
4. **ì €ì¥ì†Œ ê´€ë¦¬**: Git LFS ë˜ëŠ” ë³„ë„ ì €ì¥ì†Œ í•„ìš”

### ğŸ”„ ëŒ€ì•ˆ ë°©ì•ˆ

#### Option A: ì»¨í…Œì´ë„ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ë¯¸ëŸ¬ (ê¶Œì¥)
```bash
# ê¸°ì—… í™˜ê²½ì—ì„œ ê¶Œì¥
# Private Docker Registry + APT Mirror êµ¬ì¶•
# - ë² ì´ìŠ¤ ì´ë¯¸ì§€: ë‚´ë¶€ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë¯¸ëŸ¬
# - APT íŒ¨í‚¤ì§€: ë‚´ë¶€ APT ë¯¸ëŸ¬ ì„œë²„ êµ¬ì¶•
```

#### Option B: ë©€í‹° ìŠ¤í…Œì´ì§€ ì•„ì¹´ì´ë¸Œ
```dockerfile
# ë‹¨ê³„ë³„ ì´ë¯¸ì§€ ìƒì„± í›„ ì¡°í•©
FROM ubuntu:22.04 AS apt-cache
RUN apt-get update && apt-get download ...

FROM nvidia/cuda:11.8.0... AS base-with-packages
COPY --from=apt-cache /var/cache/apt/archives/*.deb /tmp/
RUN dpkg -i /tmp/*.deb
```

### ğŸ“Š ì‘ì—… ìš°ì„ ìˆœìœ„ í‰ê°€

| êµ¬ì„±ìš”ì†Œ | ë‚œì´ë„ | ìš©ëŸ‰ | ìœ ì§€ë³´ìˆ˜ | ìš°ì„ ìˆœìœ„ |
|----------|--------|------|----------|----------|
| ë² ì´ìŠ¤ ì´ë¯¸ì§€ | ì¤‘ê°„ | 6GB | ë‚®ìŒ | ë†’ìŒ |
| APT íŒ¨í‚¤ì§€ | ë†’ìŒ | 0.6GB | ë†’ìŒ | ì¤‘ê°„ |
| Git ì €ì¥ì†Œ | ì¤‘ê°„ | 0.5GB | ì¤‘ê°„ | ì¤‘ê°„ |
| ê¸°íƒ€ íŒŒì¼ | ë‚®ìŒ | 0.01GB | ë‚®ìŒ | ë‚®ìŒ |

### âœ… ì™„ë£Œ ì¡°ê±´

- [ ] deps_sync.shì— ëª¨ë“  êµ¬ì„±ìš”ì†Œ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
- [ ] Dockerfileì— full-offline ëª¨ë“œ ì§€ì›
- [ ] build.pyì— ì™„ì „ ì˜¤í”„ë¼ì¸ ê°ì§€ ë¡œì§
- [ ] `docker build --network=none` í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] artifacts ì´ ìš©ëŸ‰ 15GB ì´í•˜ ìœ ì§€
- [ ] ë¬¸ì„œí™” ì™„ë£Œ

### ğŸ’¡ ê¶Œì¥ ê²°ë¡ 

**CP-005ëŠ” í˜„ì¬ ë³´ë¥˜ë˜ì—ˆìŠµë‹ˆë‹¤.**

**ì´ìœ **:
1. **ë³µì¡ë„ ëŒ€ë¹„ íš¨ìš©ì„± ë¶€ì¡±**: 8-12ì‹œê°„ íˆ¬ì… ëŒ€ë¹„ ì‚¬ìš© ë¹ˆë„ ë‚®ìŒ
2. **ìœ ì§€ë³´ìˆ˜ ë¶€ë‹´**: ì •ê¸°ì ì¸ ì•„ì¹´ì´ë¸Œ ì—…ë°ì´íŠ¸ í•„ìš”
3. **ìš©ëŸ‰ ë¬¸ì œ**: 15GB í¬ê¸°ì˜ artifacts ê´€ë¦¬ ë¶€ë‹´
4. **ëŒ€ì•ˆ ì¡´ì¬**: ê¸°ì—… í™˜ê²½ì—ì„œëŠ” ë‚´ë¶€ ë¯¸ëŸ¬ ì„œë²„ê°€ ë” íš¨ìœ¨ì 

**í˜„ì¬ CP-002 ìˆ˜ì¤€(Python íŒ¨í‚¤ì§€ ì˜¤í”„ë¼ì¸)ìœ¼ë¡œ ì¶©ë¶„íˆ ì‹¤ìš©ì ì…ë‹ˆë‹¤.**

---

## CP-006: deps_sync.sh ì»¨í…Œì´ë„ˆí™”

### ğŸ“Œ ê°œìš”

**ëª©ì **: deps_sync.shë¥¼ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ê°œì„ 

**ë°°ê²½**:
- í˜„ì¬: í˜¸ìŠ¤íŠ¸ Python í™˜ê²½ì— ì˜ì¡´ (Python 3.8.10 í˜¸í™˜ì„± ë¬¸ì œ)
- ë¬¸ì œ: í™˜ê²½ ì˜ì¡´ì„±, í¬ë¡œìŠ¤ í”Œë«í¼ í˜¸í™˜ì„± ë¶€ì¡±
- ëª©í‘œ: ì¼ê´€ëœ ì‹¤í–‰ í™˜ê²½ ì œê³µ

**ìš°ì„ ìˆœìœ„**: ì¤‘ê°„  
**ì˜ˆìƒ ì‘ì—… ì‹œê°„**: 3-4ì‹œê°„  
**ì™„ë£Œ í›„ íš¨ê³¼**: CP-004, CP-005ì˜ ì „ì œ ì¡°ê±´ í•´ê²°

### ğŸ“‹ í˜„ì¬ ë¬¸ì œì 

#### 1. í™˜ê²½ ì˜ì¡´ì„±
```bash
# í˜„ì¬ ë°©ì‹ - í˜¸ìŠ¤íŠ¸ í™˜ê²½ ì˜ì¡´
./scripts/deps_sync.sh ubuntu22.04-cuda11.8-torch2.1
# ERROR: Package 'networkx' requires a different Python: 3.8.10 not in '>=3.9'
```

#### 2. ê²½ë¡œ ì°¸ì¡° ë¬¸ì œ
- `PROJECT_ROOT` ê²½ë¡œ ë¡œì§ì´ í˜¸ìŠ¤íŠ¸ ê¸°ì¤€
- ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ê²½ë¡œì™€ ë¶ˆì¼ì¹˜

### ğŸ¯ ë³€ê²½ ëª©í‘œ

#### 1. ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ì‹¤í–‰
```bash
# ìƒˆë¡œìš´ ë°©ì‹ - ì»¨í…Œì´ë„ˆí™”
docker run --rm -v $PWD/artifacts:/workspace/artifacts \
  ubuntu:22.04 /workspace/scripts/deps_sync.sh ubuntu22.04-cuda11.8-torch2.1
```

#### 2. build.py í†µí•©
```bash
# í†µí•© ì›Œí¬í”Œë¡œìš°
python3 scripts/build.py --preset ubuntu22.04-cuda11.8-torch2.1 --sync-deps
```

### ğŸ“ ë³€ê²½ ì‚¬í•­

#### 1. deps_sync.sh ìˆ˜ì •
- [ ] ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ê²½ë¡œ ëŒ€ì‘
- [ ] Python ë²„ì „ í˜¸í™˜ì„± í•´ê²°
- [ ] ë³¼ë¥¨ ë§ˆìš´íŠ¸ ì§€ì›

#### 2. build.py í™•ì¥
- [ ] `--sync-deps` í”Œë˜ê·¸ ì¶”ê°€
- [ ] ì»¨í…Œì´ë„ˆ ê¸°ë°˜ deps_sync ì‹¤í–‰
- [ ] ë¹Œë“œ íŒŒì´í”„ë¼ì¸ í†µí•©

#### 3. ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [ ] ìƒˆë¡œìš´ ì‚¬ìš© ë°©ë²• ë¬¸ì„œí™”
- [ ] ë³¼ë¥¨ ë§ˆìš´íŠ¸ ê°€ì´ë“œ

### âœ… ì™„ë£Œ ì¡°ê±´

- [ ] ì»¨í…Œì´ë„ˆì—ì„œ deps_sync.sh ì •ìƒ ì‹¤í–‰
- [ ] Python ë²„ì „ í˜¸í™˜ì„± ë¬¸ì œ í•´ê²°
- [ ] build.py --sync-deps ë™ì‘ í™•ì¸
- [ ] í¬ë¡œìŠ¤ í”Œë«í¼ í…ŒìŠ¤íŠ¸ (Linux/macOS/Windows)
- [ ] ë¬¸ì„œí™” ì™„ë£Œ

### ğŸ”„ í›„ì† ì‘ì—…

**CP-006 ì™„ë£Œ í›„ ì¬ê°œ**:
- CP-004: ëŒ€í™”í˜• ì˜ì¡´ì„± ê´€ë¦¬ (ë³´ë¥˜ í•´ì œ)
- CP-005: ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ (ì¬ê²€í† )

---

## CP-007: í”„ë¦¬ì…‹ ë‹¨ìˆœí™” âœ… ì™„ë£Œ

### ğŸ“Œ ê°œìš”

**ëª©ì **: í”„ë¦¬ì…‹ JSON íŒŒì¼ì„ ë‹¨ìˆœí™”í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ ë° ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

**ë°°ê²½**:
- í˜„ì¬: 102ë¼ì¸, 25+ í•„ë“œì˜ ë³µì¡í•œ í”„ë¦¬ì…‹ êµ¬ì¡°
- ë¬¸ì œ: ì‹¤ì œ ì‚¬ìš©ë¥  45%, ì¤‘ë³µ í•„ë“œ, ë¬¸ì„œìš© í•„ë“œ ê³¼ë‹¤
- ëª©í‘œ: ì‹¤ì œ ì‚¬ìš© í•„ë“œë§Œ ìœ ì§€í•˜ì—¬ ê°„ê²°í•˜ê³  ëª…í™•í•œ í”„ë¦¬ì…‹

**ìš°ì„ ìˆœìœ„**: ë†’ìŒ  
**ì˜ˆìƒ ì‘ì—… ì‹œê°„**: 2-3ì‹œê°„  
**ì‹¤ì œ ì‘ì—… ì‹œê°„**: ì•½ 1ì‹œê°„  
**ì‹œì‘ì¼**: 2025-11-21  
**ì™„ë£Œì¼**: 2025-11-21

### ğŸ“Š í˜„ì¬ ì§„í–‰ ìƒí™©

#### âœ… ì™„ë£Œëœ ì‘ì—…
1. **í•„ë“œ ì‚¬ìš© í˜„í™© ë¶„ì„**
   - ì‹¤ì œ ì‚¬ìš© í•„ë“œ vs ë¯¸ì‚¬ìš© í•„ë“œ ë¶„ë¥˜ ì™„ë£Œ
   - build.py, Dockerfile, deps_sync.sh ì°¸ì¡° íŒ¨í„´ ë¶„ì„

2. **í”„ë¦¬ì…‹ ë‹¨ìˆœí™” ì ìš©**
   - `ubuntu22.04-cuda11.8-torch2.1.json`: 102 â†’ 29ë¼ì¸ (71% ê°ì†Œ)
   - TensorRT enabled í•„ë“œ ì œê±° (í•­ìƒ í™œì„±í™” ì •ì±…)
   - ì¤‘ë³µ/ë¬¸ì„œìš© í•„ë“œ ì œê±°

3. **ì½”ë“œ ì—…ë°ì´íŠ¸**
   - `scripts/builder/docker.py`: TensorRT ì²˜ë¦¬ ë¡œì§ ë‹¨ìˆœí™”
   - `scripts/builder/preset.py`: ê²€ì¦ ë¡œì§ ì—…ë°ì´íŠ¸  
   - `scripts/deps_sync.sh`: TensorRT í•­ìƒ í™œì„±í™” ì²˜ë¦¬

4. **ë¬¸ì„œ ì—…ë°ì´íŠ¸**
   - `docs/preset-schema.md`: ë‹¨ìˆœí™”ëœ ìŠ¤í‚¤ë§ˆ ë°˜ì˜
   - êµ¬/ì‹  í”„ë¦¬ì…‹ ë¹„êµí‘œ ì¶”ê°€
   - ì˜ˆì œ í”„ë¦¬ì…‹ ì—…ë°ì´íŠ¸

### ğŸ“‹ ì™„ë£Œëœ ì¶”ê°€ ì‘ì—…

#### Phase 1: ì¶”ê°€ í”„ë¦¬ì…‹ íŒŒì¼ ë‹¨ìˆœí™”
- [x] ë‹¤ë¥¸ í”„ë¦¬ì…‹ íŒŒì¼ë“¤ í™•ì¸ (í”„ë¡œì íŠ¸ì—ëŠ” 2ê°œë§Œ ì¡´ì¬)
- [x] preset-template.json ì—…ë°ì´íŠ¸ (100 â†’ 29ì¤„)
- [x] ubuntu22.04-cuda11.8-torch2.1.json ì´ë¯¸ ë‹¨ìˆœí™”ë¨

#### Phase 2: ì½”ë“œ ê²€ì¦ ë° í…ŒìŠ¤íŠ¸
- [x] ë¹Œë“œ íŒŒì´í”„ë¼ì¸ í…ŒìŠ¤íŠ¸ (--list-presets, --dry-run í†µê³¼)
- [x] í”„ë¦¬ì…‹ ê²€ì¦ ë¡œì§ ìˆ˜ì • (preset.py ì—…ë°ì´íŠ¸)
- [x] í˜¸í™˜ì„± í™•ì¸ (ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼)

#### Phase 3: ë¬¸ì„œ ì •ë¦¬
- [x] README.md í”„ë¦¬ì…‹ ê´€ë ¨ ë‚´ìš© ì—…ë°ì´íŠ¸
- [x] QUICK_REFERENCE.md ì˜¤ë˜ëœ ì°¸ì¡° ì œê±°
- [x] ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ ë¶ˆí•„ìš” (ë³„ë„ í”„ë¦¬ì…‹ ì—†ìŒ)

### ğŸ¯ ë‹¨ìˆœí™” íš¨ê³¼

| êµ¬ë¶„ | ê¸°ì¡´ | ë‹¨ìˆœí™”ëœ | ê°œì„  |
|------|------|----------|------|
| ë¼ì¸ ìˆ˜ | 102 | 29 | 71% ê°ì†Œ |
| í•„ë“œ ìˆ˜ | 25+ | 11 | 56% ê°ì†Œ |
| ì‹¤ì œ ì‚¬ìš©ë¥  | ~45% | 100% | ì™„ì „ í™œìš© |
| ë³µì¡ë„ | ë†’ìŒ | ë‚®ìŒ | í¬ê²Œ í–¥ìƒ |

### ğŸ“ ì œê±°ëœ í•„ë“œë“¤

```json
// 1. ë¬¸ì„œìš©/ì¤‘ë³µ í•„ë“œ
"metadata.created", "metadata.target_gpu",
"pytorch.version", "torchvision_version", "torchaudio_version",
"cuda.version", "cuda.arch_name",

// 2. í•­ìƒ ê³ ì •ê°’ì¸ ì„¤ì •
"tensorrt.enabled", "required_in_runtime", "supported_versions",
"build_options.build_ffmpeg_from_source", "build_opencv_from_source",
"build_options.opencv_cuda_enabled", "xaiva_media_source.type",

// 3. Dockerfile í•˜ë“œì½”ë”© ì„¤ì •
"system_packages": [...], // 50+ íŒ¨í‚¤ì§€
"environment": {...}      // 5ê°œ í™˜ê²½ë³€ìˆ˜
```

### âœ… ì™„ë£Œ ì¡°ê±´

- [x] ëª¨ë“  í”„ë¦¬ì…‹ íŒŒì¼ì´ ë‹¨ìˆœí™”ëœ í˜•ì‹ìœ¼ë¡œ ì—…ë°ì´íŠ¸
- [x] ê¸°ì¡´ ë¹Œë“œ íŒŒì´í”„ë¼ì¸ê³¼ 100% í˜¸í™˜ì„± ìœ ì§€
- [x] ë“œë¼ì´ ëŸ° í…ŒìŠ¤íŠ¸ í†µê³¼ (ì‹¤ì œ ë¹Œë“œëŠ” ë¯¸ìˆ˜í–‰)
- [x] ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ
- [x] ì½”ë“œ ê²€ì¦ ë¡œì§ ìˆ˜ì • ì™„ë£Œ

### ğŸ“Š CP-007 ì™„ë£Œ ìš”ì•½

#### ë‹¬ì„±ëœ ë³€ê²½ì‚¬í•­
- âœ… **preset-template.json**: 100 â†’ 29ë¼ì¸ (71% ê°ì†Œ)
- âœ… **ëª¨ë“  í”„ë¦¬ì…‹ íŒŒì¼ ë‹¨ìˆœí™” ì™„ë£Œ**: 2ê°œ íŒŒì¼ (template + ubuntu22.04)
- âœ… **ì½”ë“œ ì—…ë°ì´íŠ¸ ì™„ë£Œ**: preset.py ê²€ì¦ ë¡œì§ ìˆ˜ì •
  - system_packages, environment í•„ìˆ˜ í•„ë“œ ì œê±°
  - TensorRT-CUDA í˜¸í™˜ì„± ì²´í¬ ê°„ì†Œí™”
- âœ… **ë¬¸ì„œ ì—…ë°ì´íŠ¸ ì™„ë£Œ**: 
  - QUICK_REFERENCE.md: --build-type ì œê±°, ì´ë¯¸ì§€ íƒœê·¸ ì •ë¦¬
  - README.md: system_packages ì°¸ì¡° ìˆ˜ì •
- âœ… **ë“œë¼ì´ ëŸ° ê²€ì¦ í†µê³¼**:
  - --list-presets ì •ìƒ ë™ì‘
  - --dry-run ì˜¬ë°”ë¥¸ ëª…ë ¹ì–´ ìƒì„±

#### ì‹¤ì œ ì‘ì—… ì‹œê°„ vs ì˜ˆìƒ
- **ì˜ˆìƒ**: 2-3ì‹œê°„
- **ì‹¤ì œ**: ì•½ 1ì‹œê°„ (50-67% ì‹œê°„ ì ˆì•½)

#### ë‹¨ìˆœí™” íš¨ê³¼
| êµ¬ë¶„ | ê¸°ì¡´ | ë‹¨ìˆœí™”ëœ | ê°œì„  |
|------|------|----------|------|
| ë¼ì¸ ìˆ˜ | 102 | 29 | 71% ê°ì†Œ |
| í•„ë“œ ìˆ˜ | 25+ | 11 | 56% ê°ì†Œ |
| ì‹¤ì œ ì‚¬ìš©ë¥  | ~45% | 100% | ì™„ì „ í™œìš© |
| ë³µì¡ë„ | ë†’ìŒ | ë‚®ìŒ | ëŒ€í­ í–¥ìƒ |

#### ê²€ì¦ ì™„ë£Œ
- âœ… --list-presets ì •ìƒ ë™ì‘ (2ê°œ í”„ë¦¬ì…‹ ë¡œë“œ)
- âœ… --dry-run ì˜¬ë°”ë¥¸ ëª…ë ¹ì–´ ìƒì„±
- âœ… í”„ë¦¬ì…‹ ë¡œë”© ë° ê²€ì¦ ë¡œì§ ì •ìƒ
- âœ… ëª¨ë“  build args ì •ìƒ ì¶”ì¶œ

**ìƒíƒœ**: âœ… **ì™„ë£Œ** (2025-11-21)  
**ì™„ë£Œì¼**: 2025-11-21

### ğŸ”„ í›„ì† ì‘ì—…

**CP-007 ì™„ë£Œ í›„**:
- ìƒˆë¡œìš´ í”„ë¦¬ì…‹ ìƒì„±ì´ ë”ìš± ê°„í¸í•´ì§
- CP-006 (deps_sync.sh ì»¨í…Œì´ë„ˆí™”) ì§„í–‰ ì‹œ ë” ê°„ë‹¨í•œ êµ¬ì¡°ë¡œ ì‘ì—… ê°€ëŠ¥
- í–¥í›„ í”„ë¦¬ì…‹ í™•ì¥ ì‹œ ëª…í™•í•œ ê°€ì´ë“œë¼ì¸ ì œê³µ

---

## ğŸ“… ì „ì²´ êµ¬í˜„ íƒ€ì„ë¼ì¸

### Week 1: í•µì‹¬ ë³€ê²½ (CP-001, CP-002)

**Day 1-2: CP-001 Dev ì´ë¯¸ì§€ë§Œ ì‚¬ìš©**
- Dockerfile ìˆ˜ì •
- build.py ìˆ˜ì •
- í…ŒìŠ¤íŠ¸

**Day 3-5: CP-002 ë¹Œë“œ ì˜ì¡´ì„± ì•„ì¹´ì´ë¸Œ**
- deps_sync.sh ê°œì„ 
- Dockerfile í•˜ì´ë¸Œë¦¬ë“œ ì§€ì›
- build.py ë¹Œë“œ ëª¨ë“œ
- í…ŒìŠ¤íŠ¸

### Week 2: ì¶”ê°€ ê¸°ëŠ¥ ë° ë¬¸ì„œ (CP-003, CP-004)

**Day 6-7: CP-003 ë¸Œëœì¹˜ ì„ íƒ**
- ì„œë¸Œëª¨ë“ˆ ì„¤ì •
- build.py ë¸Œëœì¹˜ ì²˜ë¦¬
- í…ŒìŠ¤íŠ¸

**Day 8-9: CP-006 deps_sync.sh ì»¨í…Œì´ë„ˆí™”**
- ì»¨í…Œì´ë„ˆ ê¸°ë°˜ ì‹¤í–‰ í™˜ê²½ êµ¬ì¶•
- build.py í†µí•©
- í…ŒìŠ¤íŠ¸

**Week 3: ì¶”ê°€ ê¸°ëŠ¥ (ì„ íƒì )**

**Day 10-11: CP-004 ëŒ€í™”í˜• ì˜ì¡´ì„± ê´€ë¦¬**
- CP-006 ì™„ë£Œ í›„ ë³´ë¥˜ í•´ì œ
- ì˜ì¡´ì„± ì²´í¬ êµ¬í˜„
- ëŒ€í™”í˜• í”Œë¡œìš° í†µí•©

**Day 12-15: CP-005 ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ (ë³´ë¥˜ ì¤‘)**
- ë² ì´ìŠ¤ ì´ë¯¸ì§€ ì•„ì¹´ì´ë¸Œ
- APT íŒ¨í‚¤ì§€ ì•„ì¹´ì´ë¸Œ  
- Git ì €ì¥ì†Œ ì•„ì¹´ì´ë¸Œ
- í†µí•© í…ŒìŠ¤íŠ¸
- âš ï¸ **ê¶Œì¥í•˜ì§€ ì•ŠìŒ**: ë³µì¡ë„ ëŒ€ë¹„ íš¨ìš©ì„± ë¶€ì¡±

**Day 16: ë¬¸ì„œ ë° ìµœì¢… ê²€ì¦**
- ëª¨ë“  ë¬¸ì„œ ì—…ë°ì´íŠ¸
- í†µí•© í…ŒìŠ¤íŠ¸
- CHANGE_PLAN.md ìµœì¢… ì—…ë°ì´íŠ¸

---

## ğŸ”„ ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë³€ê²½ ID | ìƒíƒœ | ì„¤ëª… |
|------|---------|------|------|
| 2025-11-21 | - | ğŸ“‹ ê³„íš | ë³€ê²½ ê³„íš ë¬¸ì„œ ìµœì´ˆ ì‘ì„± |
| 2025-11-21 | CP-000 | âœ… ì™„ë£Œ | ì½”ë“œë² ì´ìŠ¤ ë¦¬íŒ©í† ë§ ì™„ë£Œ (Dockerfile 51% ê°ì†Œ, build.py 58% ê°ì†Œ) |
| 2025-11-21 | CP-001 | âœ… ì™„ë£Œ | Dev ì´ë¯¸ì§€ë§Œ ì‚¬ìš© - Runtime ìŠ¤í…Œì´ì§€ ì œê±°, ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ ë‹¨ìˆœí™” |
| 2025-11-21 | CP-002 | âœ… ì™„ë£Œ | ë¹Œë“œ ì˜ì¡´ì„± ì•„ì¹´ì´ë¸Œ - í•˜ì´ë¸Œë¦¬ë“œ ë¹Œë“œ ëª¨ë“œ, ì™„ì „ ì˜¤í”„ë¼ì¸ ë¹Œë“œ ì§€ì› |
| 2025-11-21 | CP-003 | âœ… ì™„ë£Œ | Xaiva Media ë¸Œëœì¹˜ ì„ íƒ - ìë™ ë¸Œëœì¹˜ ì²´í¬, ëŒ€í™”í˜• ì „í™˜, CLI ì˜¤ë²„ë¼ì´ë“œ |
| 2025-11-21 | CP-007 | âœ… ì™„ë£Œ | í”„ë¦¬ì…‹ ë‹¨ìˆœí™” ì™„ë£Œ - í…œí”Œë¦¿ 71% ê°ì†Œ, ì½”ë“œ ë° ë¬¸ì„œ ì •ë¦¬ |

---

## ğŸ“ ì‘ì—… ë…¸íŠ¸

### ì¼ë°˜ ë…¸íŠ¸

- ê° ë³€ê²½ ì‚¬í•­ì€ ë…ë¦½ì ìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥
- Git ë¸Œëœì¹˜ë¥¼ ë¶„ë¦¬í•˜ì—¬ ì‘ì—… ê¶Œì¥
- ë³€ê²½ ì‚¬í•­ë§ˆë‹¤ í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ merge

### ìš°ì„ ìˆœìœ„ ê¶Œì¥

1. **CP-001 (Dev ì´ë¯¸ì§€ë§Œ ì‚¬ìš©)**: ê°€ì¥ ê°„ë‹¨, ì˜í–¥ í¬ì§€ ì•ŠìŒ
2. **CP-002 (ì˜ì¡´ì„± ì•„ì¹´ì´ë¸Œ)**: í•µì‹¬ ê¸°ëŠ¥, ì˜¤í”„ë¼ì¸ ë¹Œë“œ ì§€ì›
3. **CP-003 (ë¸Œëœì¹˜ ì„ íƒ)**: ê°œë°œ í¸ì˜ì„±
4. **CP-006 (deps_sync ì»¨í…Œì´ë„ˆí™”)**: í™˜ê²½ ì¼ê´€ì„± í™•ë³´
5. **CP-004 (ëŒ€í™”í˜• ì˜ì¡´ì„±)**: UX ê°œì„  (CP-006 ì™„ë£Œ í›„)

### ì˜ì¡´ì„±

- CP-004ëŠ” CP-006 ì™„ë£Œ í›„ êµ¬í˜„ ê¶Œì¥
- CP-005ëŠ” CP-006 ì™„ë£Œ í›„ ì¬ê²€í† 
- CP-001ê³¼ CP-002ëŠ” ë…ë¦½ì  (ë™ì‹œ ì‘ì—… ê°€ëŠ¥)
- CP-003ì€ ë…ë¦½ì 

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë³€ê²½ ì‹œì‘ ì „
- [ ] í˜„ì¬ ë¸Œëœì¹˜ ìƒíƒœ í™•ì¸
- [ ] ì‘ì—… ë¸Œëœì¹˜ ìƒì„±
- [ ] ê´€ë ¨ ë¬¸ì„œ ì½ê¸°

### ë³€ê²½ ì§„í–‰ ì¤‘
- [ ] ë‹¨ê³„ë³„ ì»¤ë°‹
- [ ] í…ŒìŠ¤íŠ¸ ì‘ì„± ë° ì‹¤í–‰
- [ ] ì½”ë“œ ë¦¬ë·° (í•„ìš”ì‹œ)

### ë³€ê²½ ì™„ë£Œ í›„
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ë¬¸ì„œ ì—…ë°ì´íŠ¸
- [ ] CHANGE_PLAN.md ì—…ë°ì´íŠ¸
- [ ] ë³€ê²½ ì´ë ¥ ê¸°ë¡
- [ ] ë©”ì¸ ë¸Œëœì¹˜ merge

---

**ë¬¸ì„œ ë²„ì „**: 1.0  
**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-21  
**ê´€ë¦¬ì**: h.kim

